<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Aoki çš„è‡ªç•™åœ° RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Aoki çš„è‡ªç•™åœ° Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Aoki çš„è‡ªç•™åœ°" href="/opensearch.xml"><title data-react-helmet="true">[TS] ts-axios(25) - ç¼–è¯‘å‘å¸ƒ | Aoki çš„è‡ªç•™åœ°</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://phero.live/docs/TypeScript/ts-axios-25"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="[TS] ts-axios(25) - ç¼–è¯‘å‘å¸ƒ | Aoki çš„è‡ªç•™åœ°"><meta data-react-helmet="true" name="description" content="----------------------------------------------------------------"><meta data-react-helmet="true" property="og:description" content="----------------------------------------------------------------"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://phero.live/docs/TypeScript/ts-axios-25"><link data-react-helmet="true" rel="alternate" href="https://phero.live/docs/TypeScript/ts-axios-25" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://phero.live/docs/TypeScript/ts-axios-25" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BMRZNSN9O0-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.23909136.css">
<link rel="preload" href="/assets/js/runtime~main.247f801c.js" as="script">
<link rel="preload" href="/assets/js/main.5b72373d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Aoki</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">ç¬”è®°</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/aokikoko" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">æˆ‘çš„çŸ¥è¯†åº“ ğŸ˜€</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/CSS/transition-animation-transform">CSS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/DocusaurusTips/code-theme">Docusaurusä½¿ç”¨æŠ€å·§</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/TypeScript/basic-types">TypeScript</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/basic-types">[TS] åŸºç¡€ç±»å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/variable-declarations">[TS] å˜é‡å£°æ˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/interface">[TS] æ¥å£</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/class">[TS] ç±»</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/function">[TS] å‡½æ•°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/generic">[TS] æ³›å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/inference">[TS] ç±»å‹æ¨æ–­</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/advance">[TS] é«˜çº§ç±»å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-1">[TS] ts-axios(1) - é¡¹ç›®æ„å»º</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-2">[TS] ts-axios(2) - åŸºç¡€åŠŸèƒ½(å¤„ç†è¯·æ±‚url)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-3">[TS] ts-axios(3) - åŸºç¡€åŠŸèƒ½(å¤„ç†è¯·æ±‚body)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-4">[TS] ts-axios(4) - åŸºç¡€åŠŸèƒ½(å¤„ç†è¯·æ±‚header)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-5">[TS] ts-axios(5) - åŸºç¡€åŠŸèƒ½(è·å–å“åº”æ•°æ®)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-6">[TS] ts-axios(6) - åŸºç¡€åŠŸèƒ½(è·å–å“åº”header)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-7">[TS] ts-axios(7) - åŸºç¡€åŠŸèƒ½(è·å–å“åº”data)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-8">[TS] ts-axios(8) - å¼‚å¸¸å¤„ç†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-9">[TS] ts-axios(9) - æ¥å£æ‰©å±•</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-10">[TS] ts-axios(10) - æ‹¦æˆªå™¨å®ç°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-11">[TS] ts-axios(11) - é…ç½®åŒ–å®ç°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-12">[TS] ts-axios(12) - å–æ¶ˆåŠŸèƒ½</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-13">[TS] ts-axios(13) - withCredentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-14">[TS] ts-axios(14) - XSRF é˜²å¾¡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-15">[TS] ts-axios(15) - è¿›åº¦ç›‘æ§</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-16">[TS] ts-axios(16) - HTTPæˆæƒä¸è‡ªå®šä¹‰çŠ¶æ€ç </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-17">[TS] ts-axios(17) - å‚æ•°åºåˆ—åŒ–ä¸baseURL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-18">[TS] ts-axios(18) - é™æ€æ–¹æ³•æ‰©å±•</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-19">[TS] ts-axios(19) - å•å…ƒæµ‹è¯•(Jestå®‰è£…é…ç½®)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-20">[TS] ts-axios(20) - å•å…ƒæµ‹è¯•(è¾…åŠ©æ¨¡å—)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-21">[TS] ts-axios(21) - å•å…ƒæµ‹è¯•(è¯·æ±‚æ¨¡å—ä¸headersæ¨¡å—)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-22">[TS] ts-axios(22) - å•å…ƒæµ‹è¯•(Axioså®ä¾‹æ¨¡å—ä¸æ‹¦æˆªå™¨æ¨¡å—)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-23">[TS] ts-axios(23) - å•å…ƒæµ‹è¯•(mergeConfigæ¨¡å—ä¸è¯·æ±‚å–æ¶ˆæ¨¡å—)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/TypeScript/ts-axios-24">[TS] ts-axios(24) - å•å…ƒæµ‹è¯•(å‰©ä½™æ¨¡å—)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/TypeScript/ts-axios-25">[TS] ts-axios(25) - ç¼–è¯‘å‘å¸ƒ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Another/bigo">ç®—æ³•å°é¢˜ç›®</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/architecture/history">æ¶æ„</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Cli/ESLint">Cli</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/DevOps/prometheus">DevOps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Http/OptionsRequest">Http</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Java/basic">Java</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Linux/basic">Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Mysql/case">Mysql</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Nginx/sign">Nginx</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Node.js/buffer">Node.js</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/React/jsx">React</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/interview/http">interview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/ecma">javascript</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_eoK2"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_e+kA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>[TS] ts-axios(25) - ç¼–è¯‘å‘å¸ƒ</h1></header><hr><h2 class="anchor anchorWithStickyNavbar_y2LR" id="éœ€æ±‚åˆ†æ">éœ€æ±‚åˆ†æ<a class="hash-link" href="#éœ€æ±‚åˆ†æ" title="Direct link to heading">â€‹</a></h2><p>å‰é¢çš„ç« èŠ‚æˆ‘ä»¬å®Œæˆ <code>ts-axios</code> åº“çš„ä»£ç ç¼–å†™å’Œå•å…ƒæµ‹è¯•ã€‚è¿™ä¸€ç« æˆ‘ä»¬å¸Œæœ›æŠŠä»£ç éƒ¨ç½²å‘å¸ƒåˆ°å…¬å…± <code>npm</code> ä¸Šï¼Œä¾›åˆ«äººä¸‹è½½ä½¿ç”¨ã€‚ä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½ä¼šä½¿ç”¨ TypeScript å¼€å‘ï¼Œä»ç„¶æœ‰å¤§é‡çš„ JavaScript ç”¨æˆ·ï¼Œå®ƒä»¬æ˜¯ä¸èƒ½ç›´æ¥å¼•ç”¨ TypeScript ä»£ç çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆå¯¹æºç åšç¼–è¯‘å’Œæ‰“åŒ…ï¼Œç„¶åå†å‘å¸ƒã€‚</p><p>ç”±äºæˆ‘ä»¬ä¼šæŠŠåŒ…å‘å¸ƒåˆ°å…¬å…±çš„ npm æºï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰ <code>npm</code> è´¦å·ï¼Œé‚£ä¹ˆéœ€è¦å…ˆå»<a href="https://www.npmjs.com/signup" target="_blank" rel="noopener noreferrer">å®˜ç½‘æ³¨å†Œ</a>ã€‚æ³¨å†Œå®Œæˆåï¼Œå¯ä»¥å»ç»ˆç«¯æ‰§è¡Œ <code>npm login</code> ç™»å½•ã€‚è¿™ä¸ªæ­¥éª¤éå¸¸é‡è¦ï¼Œå†³å®šä½ æœ€ç»ˆèƒ½å¦å‘å¸ƒæˆåŠŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ç¼–è¯‘å’Œæ‰“åŒ…">ç¼–è¯‘å’Œæ‰“åŒ…<a class="hash-link" href="#ç¼–è¯‘å’Œæ‰“åŒ…" title="Direct link to heading">â€‹</a></h2><p>æˆ‘ä»¬ä¼šåˆ©ç”¨ <a href="https://github.com/rollup/rollup" target="_blank" rel="noopener noreferrer">rollup</a> æ¥æ‰“åŒ…æˆ‘ä»¬çš„ <code>ts-axios</code> åº“ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå¸¸è‘—åçš„ç¼–è¯‘æ‰“åŒ…å·¥å…·ï¼ŒVue.js ä¹Ÿæ˜¯åˆ©ç”¨ rollup ç¼–è¯‘æ‰“åŒ…çš„ã€‚ç›¸æ¯” webpackï¼Œå®ƒéå¸¸é€‚åˆå»ç¼–è¯‘å’Œæ‰“åŒ…ä¸€äº› JS åº“ã€‚</p><p>ç”±äºä½¿ç”¨ <code>typescript-library-starter</code> åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®ï¼Œæˆ‘ä»¬å·²ç»æ‹¥æœ‰äº† rollup æ‰“åŒ…çš„ç›¸å…³é…ç½®å’Œç›¸å…³æ’ä»¶çš„å®‰è£…ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å¯¹ç”Ÿæˆçš„ <code>rollup.config.ts</code> åšå°å°çš„ä¿®æ”¹ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ä¿®æ”¹-rollupconfigts">ä¿®æ”¹ rollup.config.ts<a class="hash-link" href="#ä¿®æ”¹-rollupconfigts" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_J+bg language-typescript theme-code-block"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> resolve </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;rollup-plugin-node-resolve&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> commonjs </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;rollup-plugin-commonjs&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> sourceMaps </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;rollup-plugin-sourcemaps&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> camelCase </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;lodash.camelcase&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> typescript </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;rollup-plugin-typescript2&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> json </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;rollup-plugin-json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> pkg </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;./package.json&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> libraryName </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;axios&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  input</span><span class="token operator">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">src/index.ts</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  output</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> file</span><span class="token operator">:</span><span class="token plain"> pkg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">camelCase</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">libraryName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> format</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;umd&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> sourcemap</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> file</span><span class="token operator">:</span><span class="token plain"> pkg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> format</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;es&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> sourcemap</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Indicate here external modules you don&#x27;t wanna include in your bundle (i.e.: &#x27;lodash&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  external</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  watch</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    include</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;src/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Allow json resolution</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Compile TypeScript files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">typescript</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> useTsconfigDeclarationDir</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Allow bundling cjs modules (unlike webpack, rollup doesn&#x27;t understand cjs)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">commonjs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Allow node_modules resolution, so you can use &#x27;external&#x27; to control</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// which external modules to include in the bundle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/rollup/rollup-plugin-node-resolve#usage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Resolve source maps to the original source</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">sourceMaps</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ³¨æ„è¦ä¿®æ”¹çš„åœ°æ–¹ï¼ŒæŠŠ <code>libraryName</code> ä¿®æ”¹ä¸º <code>axios</code>ï¼Œ<code>input</code> ä¿®æ”¹ä¸º <code>src/index.ts</code>ã€‚</p><p><code>rollup</code> çš„é…ç½®å¾ˆç®€å•ï¼Œæˆ‘ä»¬ç®€å•åœ°è¿‡ä¸€ä¸‹ã€‚</p><ul><li>input</li></ul><p>è¡¨ç¤ºæ‰“åŒ…å…¥å£æ–‡ä»¶ã€‚</p><ul><li>output</li></ul><p>è¡¨ç¤ºè¾“å‡ºçš„ç›®æ ‡æ–‡ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šè¾“å‡ºçš„æ ¼å¼ï¼Œæ¯”å¦‚ <code>umd</code> æ ¼å¼ã€<code>es</code> æ¨¡å¼ç­‰ã€‚</p><ul><li>external</li></ul><p>å£°æ˜å®ƒçš„å¤–éƒ¨ä¾èµ–ï¼Œå¯ä»¥ä¸è¢«æ‰“åŒ…è¿›å»ã€‚</p><ul><li>watch</li></ul><p>ç›‘å¬æ–‡ä»¶çš„å˜åŒ–ï¼Œé‡æ–°ç¼–è¯‘ï¼Œåªæœ‰åœ¨ç¼–è¯‘çš„æ—¶å€™å¼€å¯ <code>--watch</code> æ‰ç”Ÿæ•ˆã€‚</p><ul><li>plugins</li></ul><p>ç¼–è¯‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ’ä»¶ï¼Œå…¶ä¸­ <code>rollup-plugin-typescript2</code> å°±æ˜¯ç”¨æ¥ç¼–è¯‘ TypeScript æ–‡ä»¶ï¼Œ<code>useTsconfigDeclarationDir</code> è¡¨ç¤ºä½¿ç”¨ <code>tsconfig.json</code> æ–‡ä»¶ä¸­å®šä¹‰çš„ <code>declarationDir</code>ã€‚å…¶å®ƒæ’ä»¶æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±å»æŸ¥é˜…æ–‡æ¡£ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ä¿®æ”¹-packagejson">ä¿®æ”¹ package.json<a class="hash-link" href="#ä¿®æ”¹-packagejson" title="Direct link to heading">â€‹</a></h3><p>ç”±äºæˆ‘ä»¬å·²ç»åœ¨ <code>rollup.config.ts</code> ä¸­ä¿®æ”¹äº† <code>libraryName</code> ä¸º <code>axios</code>ï¼Œ é‚£ä¹ˆåœ¨ <code>package.json</code> æ–‡ä»¶ä¸­ä½ éœ€è¦åšç›¸å…³çš„ä¿®æ”¹ï¼š</p><div class="codeBlockContainer_J+bg language-typescript theme-code-block"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string-property property">&quot;main&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dist/axios.umd.js&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string-property property">&quot;module&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dist/axios.es5.js&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string-property property">&quot;typings&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dist/types/index.d.ts&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ç„¶åæˆ‘ä»¬åœ¨æ§åˆ¶å°æ‰§è¡Œ <code>npm run build</code>ï¼Œä¼šç¼–è¯‘è¾“å‡º <code>dist</code> ç›®å½•ï¼Œå…¶ä¸­ <code>lib</code> ç›®å½•æ˜¯å•ä¸ª <code>.ts</code> æ–‡ä»¶ç¼–è¯‘åçš„ <code>.js</code> æ–‡ä»¶ã€‚<code>types</code> ç›®å½•æ˜¯æ‰€æœ‰ <code>.ts</code> æ–‡ä»¶ç¼–è¯‘åç”Ÿäº§çš„ <code>.d.ts</code> å£°æ˜æ–‡ä»¶ã€‚<code>axios.es5.js</code> æ˜¯ç¼–è¯‘åç”Ÿæˆçš„ es æ¨¡å¼çš„å…¥å£æ–‡ä»¶ï¼Œç”¨åœ¨ <code>package.json</code> çš„ <code>module</code> å­—æ®µï¼Œ<code>axios.umd.js</code> æ–‡ä»¶æ˜¯ç¼–è¯‘åç”Ÿæˆçš„ <code>umd</code> æ¨¡å¼çš„å…¥å£æ–‡ä»¶ï¼Œç”¨åœ¨ <code>package.json</code> çš„ <code>main</code> å­—æ®µã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="è‡ªåŠ¨åŒ–éƒ¨ç½²">è‡ªåŠ¨åŒ–éƒ¨ç½²<a class="hash-link" href="#è‡ªåŠ¨åŒ–éƒ¨ç½²" title="Direct link to heading">â€‹</a></h2><p>ç”±äº <code>semantic-release</code> æ’ä»¶è¿‡äºé»‘ç›’ä¹Ÿç•¥å¾®é‡é‡ï¼Œæˆ‘è¿˜æ˜¯å†³å®šæ•™åŒå­¦ä»¬è‡ªå·±ç¼–å†™è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼Œè¿™æ ·æ›´çµæ´»ï¼Œæ„ä¹‰ä¹Ÿæ›´å¤§ï¼Œå› ä¸ºå¤§éƒ¨åˆ†åœºæ™¯æ˜¯ç”¨ä¸åˆ°é‚£ä¹ˆå¤š feature çš„ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ä¿®æ”¹-packagejson-1">ä¿®æ”¹ package.json<a class="hash-link" href="#ä¿®æ”¹-packagejson-1" title="Direct link to heading">â€‹</a></h3><p>å‘å¸ƒåˆ° npm ä¹‹å‰ä½ éœ€è¦ä¸ºä½ çš„åŒ…å‘½åï¼Œç”±äº <code>ts-axios</code> è¿™ä¸ªåå­—å·²ç»è¢«å ç”¨äº†ï¼Œæˆ‘ä½¿ç”¨äº† <code>ts-axios-new</code> è¿™ä¸ªåç§°ï¼Œå½“ç„¶ä½ å­¦åˆ°è¿™é‡Œï¼Œå°±éœ€è¦èµ·ä¸€ä¸ªæ–°åå­—äº†ã€‚å¯ä»¥ä½¿ç”¨ <code>npm view [&lt;@scope&gt;/]&lt;pkg&gt;[@&lt;version&gt;]</code> çš„æ–¹å¼å»æœç´¢ä¸€ä¸ªåŒ…åæ˜¯å¦å·²ç»å­˜åœ¨ï¼Œæ¯”å¦‚ä½ æœç´¢ <code>npm view ts-axios-new</code> ä¼šå‘ç°è¿™ä¸ªåŒ…å·²ç»å­˜åœ¨ï¼Œè¿”å›è¿™ä¸ªåŒ…ç›¸å…³ä¿¡æ¯ã€‚å¦‚æœä½ æœç´¢ <code>npm view xxxx</code> è¿”å›é”™è¯¯ 404 çš„è¯ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ä½¿ç”¨ <code>xxxx</code> è¿™ä¸ªåŒ…åäº†ã€‚</p><p>å¦‚æœä½ æƒ³è®©ä½ å‘å¸ƒçš„åŒ…å…³è”ä½ çš„ä»“åº“åœ°å€ï¼Œå¯ä»¥é…ç½® <code>repository</code> çš„ <code>url</code> å­—æ®µã€‚</p><p>å¦å¤–æˆ‘ä»¬å¢åŠ  2 ä¸ª npm scriptsï¼š</p><div class="codeBlockContainer_J+bg language-json theme-code-block"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;prepub&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;npm run test:prod &amp;&amp; npm run build&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;pub&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sh release.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å½“æˆ‘ä»¬è¿è¡Œ <code>npm run pub</code> çš„æ—¶å€™ï¼Œä¼šä¼˜å…ˆæ‰§è¡Œ <code>prepub</code> è„šæœ¬ï¼Œåœ¨ <code>prepub</code> ä¸­æˆ‘ä»¬è¿è¡Œäº† <code>test:prod</code> å’Œ <code>build</code> 2 ä¸ªè„šæœ¬ã€‚<code>&amp;&amp;</code> ç¬¦å·è¡¨ç¤ºå‰é¢ä¸€ä¸ªå‘½ä»¤æ‰§è¡ŒæˆåŠŸåæ‰ä¼šæ‰§è¡Œåé¢çš„ä»»åŠ¡ã€‚</p><p><code>npm run test:prod</code> å®é™…ä¸Šè¿è¡Œäº† <code>npm run lint &amp;&amp; npm run test -- --no-cache</code>ã€‚ å…ˆè¿è¡Œ <code>lint</code> å»æ ¡éªŒæˆ‘ä»¬çš„æºç å’Œæµ‹è¯•æ–‡ä»¶æ˜¯å¦éµå¾ª <code>tslint</code> è§„èŒƒï¼Œå†è¿è¡Œ <code>test</code> å»è·‘æµ‹è¯•ã€‚</p><p><code>npm run build</code> å®é™…ä¸Šè¿è¡Œäº† <code>tsc --module commonjs</code>ã€<code>rollup -c rollup.config.ts</code> å’Œ <code>typedoc --out docs --target es6 --theme minimal --mode file src</code>ã€‚å…ˆè¿è¡Œ <code>tsc</code> å»ç¼–è¯‘æˆ‘ä»¬çš„ <code>TypeScript</code> æ–‡ä»¶ï¼Œ<code>dist/lib</code> å’Œ <code>dist/types</code> ä¸‹çš„æ–‡ä»¶å°±æ˜¯è¯¥å‘½ä»¤äº§ç”Ÿçš„ï¼Œç„¶åè¿è¡Œ <code>rollup</code> å»æ„å»º <code>axios.umd.js</code> åŠ <code>axios.es.js</code>ï¼Œæœ€åè¿è¡Œ <code>typedoc</code> å»æ„å»ºé¡¹ç›®çš„æ–‡æ¡£ã€‚</p><p>è¿è¡Œå®Œ <code>prepub</code> åå°±ä¼šå†è¿è¡Œ <code>pub</code> å‘½ä»¤ï¼Œå®é™…ä¸Šæ‰§è¡Œäº† <code>sh release.sh</code> å‘½ä»¤ï¼Œä½†æ˜¯ç›®å‰æˆ‘ä»¬æ²¡æœ‰è¿™ä¸ªè„šæœ¬ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦æ¥ç¼–å†™éƒ¨ç½²è„šæœ¬ <code>release.sh</code>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ç¼–å†™éƒ¨ç½²è„šæœ¬">ç¼–å†™éƒ¨ç½²è„šæœ¬<a class="hash-link" href="#ç¼–å†™éƒ¨ç½²è„šæœ¬" title="Direct link to heading">â€‹</a></h3><p><code>release.sh</code>ï¼š</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token shebang important">#!/usr/bin/env sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">set</span><span class="token plain"> -e</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Enter release version: &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">read</span><span class="token plain"> VERSION</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">read</span><span class="token plain"> -p </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Releasing </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION</span><span class="token string" style="color:rgb(255, 121, 198)"> - are you sure? (y/n)&quot;</span><span class="token plain"> -n </span><span class="token number">1</span><span class="token plain"> -r</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># (optional) move to a new line</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$REPLY</span><span class="token plain"> </span><span class="token operator">=~</span><span class="token plain"> ^</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Yy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Releasing </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION</span><span class="token string" style="color:rgb(255, 121, 198)"> ...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># commit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> -A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;[build] </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">npm</span><span class="token plain"> version </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION</span><span class="token plain"> --message </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;[release] </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> push origin master</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># publish</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">npm</span><span class="token plain"> publish</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fi</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>éƒ¨ç½²è„šæœ¬æ˜¯ shell è„šæœ¬ï¼Œshell è„šæœ¬å°±æ˜¯å°è£…äº†å¤šè¡Œæ§åˆ¶å°å‘½ä»¤ï¼Œæ¥é€è¡Œè§£é‡Šä»–ä»¬çš„å«ä¹‰ã€‚</p><p><code>#!/usr/bin/env sh</code> ç”¨æ¥è¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ª shell è„šæœ¬ã€‚</p><p><code>set -e</code> å‘Šè¯‰è„šæœ¬å¦‚æœæ‰§è¡Œç»“æœä¸ä¸º true åˆ™é€€å‡ºã€‚</p><p><code>echo &quot;Enter release version: &quot;</code> åœ¨æ§åˆ¶å°è¾“å‡º <code>Enter release version:</code>ã€‚</p><p><code>read VERSION</code> è¡¨ç¤ºä»æ ‡å‡†è¾“å…¥è¯»å–å€¼ï¼Œå¹¶èµ‹å€¼ç»™ $VERSION å˜é‡ã€‚</p><p><code>read -p &quot;Releasing $VERSION - are you sure? (y/n)&quot; -n 1 -r</code>ï¼Œå…¶ä¸­ <code>read -p</code> è¡¨ç¤ºç»™å‡ºæç¤ºç¬¦ï¼Œåé¢æ¥ç€ <code>Releasing $VERSION - are you sure? (y/n)</code> æç¤ºç¬¦ï¼›<code>-n 1</code> è¡¨ç¤ºé™å®šæœ€å¤šå¯ä»¥æœ‰ 1 ä¸ªå­—ç¬¦å¯ä»¥ä½œä¸ºæœ‰æ•ˆè¯»å…¥ï¼›<code>-r</code> è¡¨ç¤ºç¦æ­¢åæ–œçº¿çš„è½¬ä¹‰åŠŸèƒ½ã€‚å› ä¸ºæˆ‘ä»¬çš„ read å¹¶æ²¡æœ‰æŒ‡å®šå˜é‡åï¼Œé‚£ä¹ˆé»˜è®¤è¿™ä¸ªè¾“å…¥è¯»å–å€¼ä¼šèµ‹å€¼ç»™ <code>$REPLY</code> å˜é‡ã€‚</p><p><code>echo</code> è¾“å‡ºç©ºå€¼è¡¨ç¤ºè·³åˆ°ä¸€ä¸ªæ–°è¡Œï¼Œ<code>#</code> åœ¨ shell è„šæœ¬ä¸­è¡¨ç¤ºæ³¨é‡Šã€‚</p><p><code>if [[ $REPLY =~ ^[Yy]$ ]]</code> è¡¨ç¤º shell è„šæœ¬ä¸­çš„æµç¨‹æ§åˆ¶è¯­å¥ï¼Œåˆ¤æ–­ <code>$REPLY</code> æ˜¯ä¸æ˜¯å¤§å°å†™çš„ <code>y</code>ï¼Œå¦‚æœæ»¡è¶³ï¼Œåˆ™èµ°åˆ°åé¢çš„ <code>then</code> é€»è¾‘ã€‚</p><p><code>echo &quot;Releasing $VERSION ...&quot;</code>  åœ¨æ§åˆ¶å°è¾“å‡º <code>Releasing $VERSION ...</code>ã€‚</p><p><code>git add -A</code> è¡¨ç¤ºæŠŠä»£ç æ‰€æœ‰å˜åŒ–æäº¤åˆ°æš‚å­˜åŒºã€‚</p><p><code>git commit -m &quot;[build] $VERSION&quot;</code> è¡¨ç¤ºæäº¤ä»£ç ï¼Œæäº¤æ³¨é‡Šæ˜¯ <code>[build] $VERSION</code>ã€‚</p><p><code>npm version $VERSION --message &quot;[release] $VERSION&quot;</code> æ˜¯ä¿®æ”¹ <code>package.json</code> ä¸­çš„ <code>version</code> å­—æ®µåˆ° <code>$VERSION</code>ï¼Œå¹¶ä¸”æäº¤ä¸€æ¡ä¿®æ”¹è®°å½•ï¼Œæäº¤æ³¨é‡Šæ˜¯ <code>[release] $VERSION</code>ã€‚</p><p><code>git push origin master</code> æ˜¯æŠŠä»£ç å‘å¸ƒåˆ°ä¸»å¹²åˆ†æ”¯ã€‚</p><p><code>npm publish</code> æ˜¯æŠŠä»“åº“å‘å¸ƒåˆ° <code>npm</code> ä¸Šï¼Œæˆ‘ä»¬ä¼šæŠŠ <code>dist</code> ç›®å½•ä¸‹çš„ä»£ç éƒ½å‘å¸ƒåˆ° <code>npm</code> ä¸Šï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ <code>package.json</code> ä¸­é…ç½®çš„æ˜¯ <code>files</code> æ˜¯ <code>[&quot;dist&quot;]</code>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="è¿è¡Œéƒ¨ç½²è„šæœ¬">è¿è¡Œéƒ¨ç½²è„šæœ¬<a class="hash-link" href="#è¿è¡Œéƒ¨ç½²è„šæœ¬" title="Direct link to heading">â€‹</a></h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¿è¡Œ <code>npm run pub</code> è„šæœ¬éƒ¨ç½²ï¼Œæˆ‘ä»¬ä¼šå‘ç°åœ¨ <code>npm run prepub</code> é˜¶æ®µï¼Œåœ¨æ‰§è¡Œ <code>tslint  --project tsconfig.json -t codeFrame &#x27;src/**/*.ts&#x27; &#x27;test/**/*.ts&#x27;</code> çš„æ—¶å€™å¤±è´¥äº†ï¼ŒåŸå› æ˜¯æˆ‘ä»¬æœ‰ä»£ç ä¸ç¬¦åˆ lint è§„èŒƒã€‚åŸæ¥æ˜¯ <code>core/xhr.ts</code> æ–‡ä»¶ä¸­ <code>processCancel</code> å‡½æ•°ä¸­å¯¹ <code>promise</code> çš„å¤„ç†ï¼Œæˆ‘ä»¬æ²¡æœ‰å¯¹å¼‚å¸¸æƒ…å†µå¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç»™å®ƒåŠ ä¸Š <code>catch</code> çš„é€»è¾‘ï¼š</p><div class="codeBlockContainer_J+bg language-typescript theme-code-block"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">processCancel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cancelToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">promise</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">reason </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">abort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">catch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">/* istanbul ignore next */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// do nothing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ç”±äºæˆ‘ä»¬ä¸ä¼šèµ°åˆ° <code>catch</code> é€»è¾‘ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»™å®ƒæ·»åŠ ä¸€ä¸ªæ³¨é‡Š <code>/* istanbul ignore next */</code> å¿½ç•¥è¯¥ä»£ç åˆ†æ”¯çš„æµ‹è¯•ã€‚</p><p>ç„¶åæˆ‘ä»¬å†é‡æ–°è¿è¡Œ <code>npm run pub</code> é€»è¾‘ï¼Œå®ƒä¼šå…ˆæ‰§è¡Œ <code>test</code>ï¼Œç„¶åè¿è¡Œ <code>build</code> ç¼–è¯‘ä»£ç ï¼Œå†æ‰§è¡Œ <code>release.sh</code> è„šæœ¬ã€‚æˆ‘ä»¬è¾“å…¥äº†è¦å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œå®ƒå°±å¯ä»¥å®Œæˆäº†æ•´ä¸ªä»£ç çš„å‘å¸ƒæµç¨‹ã€‚</p><p>é€šè¿‡ç¼–å†™éƒ¨ç½²è„šæœ¬çš„ä¸€è¡Œå‘½ä»¤å‘å¸ƒçš„æ–¹å¼ï¼Œä¸ä»…å¯ä»¥ç”¨åœ¨è¿™ç§ JS åº“ï¼Œä¹Ÿå¯ä»¥ç”¨äºæˆ‘ä»¬å¹³æ—¶é¡¹ç›®å¼€å‘ä¸­ï¼Œå¯ä»¥å¤§å¤§å¸®åŠ©æˆ‘ä»¬æé«˜ç”Ÿäº§ç‡ï¼Œä¹Ÿæ˜¯å‰ç«¯å·¥ç¨‹åŒ–ä¸­å¿…ä¸å¯å°‘çš„ä¸€ä¸ªç¯èŠ‚ï¼Œå¸Œæœ›åŒå­¦ä»¬éƒ½èƒ½å­¦ä¼šå¹¶æŒæ¡å®ƒã€‚</p><p>è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†é¡¹ç›®çš„éƒ¨ç½²å’Œå‘å¸ƒï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <code>npm</code> å®˜ç½‘ä¸Šçœ‹åˆ°æˆ‘ä»¬å‘å¸ƒçš„åŒ…ï¼Œä¸‹ä¸€èŠ‚è¯¾æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªå®é™…é¡¹ç›®ï¼Œæ¥å¼•ç”¨æˆ‘ä»¬å¼€å‘çš„ <code>ts-axios</code> åº“ã€‚</p><hr><h2 class="anchor anchorWithStickyNavbar_y2LR" id="åœ¨-ts-é¡¹ç›®ä¸­å¼•ç”¨">åœ¨ TS é¡¹ç›®ä¸­å¼•ç”¨<a class="hash-link" href="#åœ¨-ts-é¡¹ç›®ä¸­å¼•ç”¨" title="Direct link to heading">â€‹</a></h2><p>æˆ‘ä»¬å€ŸåŠ©äº <a href="https://cli.vuejs.org/" target="_blank" rel="noopener noreferrer">vue-cli</a> è„šæ‰‹æ¶åˆ›å»ºä¸€ä¸ª TypeScript çš„ Vue é¡¹ç›®ï¼Œç„¶åæˆ‘ä»¬æŠŠ Vue å®˜ç½‘ä¸Šä¸€æ®µä½¿ç”¨ axios å‘è¯·æ±‚çš„ <a href="https://cn.vuejs.org/v2/guide/computed.html#%E4%BE%A6%E5%90%AC%E5%99%A8" target="_blank" rel="noopener noreferrer">demo</a> ä»£ç æŠ„è¿‡æ¥ã€‚</p><p>æˆ‘ä»¬éœ€è¦å…ˆæ‰§è¡Œ <code>npm install ts-axios-new</code> å®‰è£… <code>ts-axios</code> åº“ã€‚</p><p><code>HelloWorld.vue</code></p><div class="codeBlockContainer_J+bg language-vue theme-code-block"><div class="codeBlockContent_csEI vue"><pre tabindex="0" class="prism-code language-vue codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;div class=&quot;hello&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;p&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      Ask a yes/no question:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;input v-model=&quot;question&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/p&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;p&gt;{{ answer }}&lt;/p&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  import Vue from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  import _ from &#x27;lodash&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  import axios from &#x27;ts-axios-new&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  export default Vue.extend({</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    name: &#x27;HelloWorld&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    data () {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        question: &#x27;&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        answer: &#x27;I cannot give you an answer until you ask a question!&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    created () {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      this.debouncedGetAnswer = _.debounce(this.getAnswer, 500)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    methods: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      debouncedGetAnswer () {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // do nothing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      getAnswer () {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (this.question.indexOf(&#x27;?&#x27;) === -1) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          this.answer = &#x27;Questions usually contain a question mark. -)&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.answer = &#x27;Thinking...&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        const instance = axios.create()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        instance.interceptors.request.use((config) =&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          config.params = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            _t: +new Date()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          return config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        })</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        instance.get(&#x27;https://yesno.wtf/api&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          .then((response) =&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            this.answer = _.capitalize(response.data.answer)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          })</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          .catch((error) =&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            this.answer = &#x27;Error! Could not reach the API. &#x27; + error</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          })</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    watch: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      question: function (newQuestion: string, oldQuestion: string) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.answer = &#x27;Waiting for you to stop typing...&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.debouncedGetAnswer()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;!-- Add &quot;scoped&quot; attribute to limit CSS to this component only --&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;style scoped&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  h3 {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    margin: 40px 0 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ul {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    list-style-type: none;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    padding: 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  li {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    display: inline-block;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    margin: 0 10px;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  a {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    color: #42b983;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/style&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>è¿™æ®µä»£ç ä¸»è¦æ˜¯æä¾›äº†ä¸€ä¸ª <code>input</code> è¾“å…¥æ¡†ï¼Œç»‘å®šäº† <code>question</code> å˜é‡ï¼Œå½“æˆ‘ä»¬è¾“å…¥çš„æ—¶å€™ï¼Œä¼šè§¦å‘ <code>question</code> çš„å˜åŒ–ï¼Œæ‰§è¡Œ <code>watch question</code> ä¸­çš„é€»è¾‘ï¼Œæ‰§è¡Œ <code>this.debouncedGetAnswer</code> æ–¹æ³•ï¼Œå®é™…ä¸Šå°±æ˜¯ <code>debounce</code> æ‰§è¡Œäº† <code>getAnswer</code> æ–¹æ³•ï¼Œå‘é€è¯·æ±‚ã€‚</p><p>æˆ‘ä»¬é€šè¿‡ <code>import axios from &#x27;ts-axios-new&#x27;
</code> å»åŠ è½½ <code>ts-axios</code> åº“ï¼Œå®é™…ä¸Šå°±æ˜¯å¼•å…¥äº† <code>node_modules/ts-axios-new/dist/axios.es5.js</code>ï¼Œå› ä¸º <code>ts-axios-new</code> çš„ <code>package.json</code> æ–‡ä»¶ä¸­é…ç½®çš„ <code>module</code> å­—æ®µæ˜¯ <code>dist/axios.es5.js</code>ï¼Œåœ¨ <code>webpack</code> ä¸­ä¼˜å…ˆ <code>import</code> ä¼˜å…ˆä¼šæ‰¾ <code>module</code> å­—æ®µï¼Œå…¶æ¬¡æ˜¯ <code>main</code> å­—æ®µã€‚</p><blockquote><p>å°æŠ€å·§ï¼šå½“æˆ‘ä»¬å¼•å…¥æŸä¸ªåº“è¿è¡Œæ—¶å‡ºç°é—®é¢˜æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒè¯• node_modules ä¸­å¯¹åº”å¼•å…¥çš„ä»£ç ã€‚</p></blockquote><p>æ³¨æ„æˆ‘ä»¬è¿™é‡Œå…ˆä½¿ç”¨äº† <code>axios.create()</code> æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ª <code>instance</code>ï¼Œç„¶åæ·»åŠ äº†ä¸€ä¸ªè¯·æ±‚æ‹¦æˆªå™¨ï¼Œä¼šåœ¨æ¯æ¬¡å‘é€è¯·æ±‚å‰ï¼Œæ·»åŠ äº†ä¸€ä¸ª <code>_t</code> å‚æ•°ï¼Œå€¼ä¸ºæ—¶é—´æˆ³ã€‚ç„¶åæ‰§è¡Œ <code>instance.get</code> å‘é€ä¸€ä¸ªè¯·æ±‚ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•´ä¸ª demo æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•ç±»å‹ç›¸å…³çš„é—®é¢˜ï¼Œè¯´æ˜æˆ‘ä»¬çš„åº“æ‰“åŒ…åçš„ä»£ç å’Œç±»å‹å£°æ˜æ–‡ä»¶éƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="åœ¨-js-é¡¹ç›®ä¸­å¼•ç”¨">åœ¨ JS é¡¹ç›®ä¸­å¼•ç”¨<a class="hash-link" href="#åœ¨-js-é¡¹ç›®ä¸­å¼•ç”¨" title="Direct link to heading">â€‹</a></h2><p>æˆ‘ä»¬ç¼–å†™çš„ TS åº“ä»ç„¶å¯ä»¥è¢«çº¯ JS çš„é¡¹ç›®å¼•ç”¨ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¥ä¿®æ”¹<a href="https://coding.imooc.com/class/74.html" target="_blank" rel="noopener noreferrer">ã€ŠVue.js2.5+cube-uié‡æ„é¥¿äº†ä¹ˆAppã€‹</a>è¯¾ç¨‹çš„ä»£ç ï¼ŒæŠŠä¹‹å‰å¯¹ <code>axios</code> çš„å¼•ç”¨æ”¹æˆå¯¹ <code>ts-axios-new</code> çš„å¼•ç”¨ã€‚è¯¾ç¨‹æºç æ˜¯å¼€æºçš„ï¼Œæ‰€ä»¥æ²¡è´­ä¹°è¯¾ç¨‹çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥å» <a href="https://github.com/ustbhuangyi/vue-sell" target="_blank" rel="noopener noreferrer">GitHub</a> ä¸‹è½½ã€‚</p><p>æˆ‘ä»¬éœ€è¦å…ˆæ‰§è¡Œ <code>npm install ts-axios-new</code> å®‰è£… <code>ts-axios</code> åº“ï¼Œç„¶åä¿®æ”¹ä»£ç ã€‚</p><p><code>api/helpers.js</code>ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports">axios</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;ts-axios-new&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> urlMap </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">development</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">production</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;http://ustbhuangyi.com/sell/&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> baseUrl </span><span class="token operator">=</span><span class="token plain"> urlMap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">NODE_ENV</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">ERR_OK</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">params </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> axios</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">baseUrl </span><span class="token operator">+</span><span class="token plain"> url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      params</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">errno</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">errno </span><span class="token operator">===</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">ERR_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>åªéœ€è¦æŠŠ <code>import axios from &#x27;axios&#x27;</code> ä¿®æ”¹ä¸º <code>import axios from &#x27;ts-axios-new&#x27;</code> å³å¯ã€‚</p><p>æ¥ç€è¿è¡Œé¡¹ç›®ï¼Œæˆ‘ä»¬å‘ç°é¡¹ç›®å¯ä»¥æˆåŠŸè¿è¡Œï¼Œå› ä¸ºæˆ‘ä»¬å®ç°äº†<code>axios</code> åœ¨æµè§ˆå™¨ç«¯çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæ‰€ä»¥å¯ä»¥æ”¾å¿ƒçš„åšæ›¿æ¢ã€‚</p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº† <code>ts-axios</code> åº“çš„å¼€å‘ã€æµ‹è¯•ã€ç¼–è¯‘ã€å‘å¸ƒå’Œå¼•ç”¨ã€‚è¯¾ç¨‹åˆ°è¿™é‡Œä¹Ÿå°±å‘Šä¸€æ®µè½äº†ï¼Œä¸‹ä¸€ç« æˆ‘ä»¬ä¼šå¯¹æ•´ä¸ªè¯¾ç¨‹åšæ€»ç»“ä¸å±•æœ›ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/aokikoko/aokikoko.github.io/blob/main/website/docs/TypeScript/ts-axios-25.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/TypeScript/ts-axios-24"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">[TS] ts-axios(24) - å•å…ƒæµ‹è¯•(å‰©ä½™æ¨¡å—)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Another/bigo"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">[å°é¢˜ç›®] ç®—æ³•å¤æ‚åº¦ç§‘æ™®</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#éœ€æ±‚åˆ†æ" class="table-of-contents__link toc-highlight">éœ€æ±‚åˆ†æ</a></li><li><a href="#ç¼–è¯‘å’Œæ‰“åŒ…" class="table-of-contents__link toc-highlight">ç¼–è¯‘å’Œæ‰“åŒ…</a><ul><li><a href="#ä¿®æ”¹-rollupconfigts" class="table-of-contents__link toc-highlight">ä¿®æ”¹ rollup.config.ts</a></li><li><a href="#ä¿®æ”¹-packagejson" class="table-of-contents__link toc-highlight">ä¿®æ”¹ package.json</a></li></ul></li><li><a href="#è‡ªåŠ¨åŒ–éƒ¨ç½²" class="table-of-contents__link toc-highlight">è‡ªåŠ¨åŒ–éƒ¨ç½²</a><ul><li><a href="#ä¿®æ”¹-packagejson-1" class="table-of-contents__link toc-highlight">ä¿®æ”¹ package.json</a></li><li><a href="#ç¼–å†™éƒ¨ç½²è„šæœ¬" class="table-of-contents__link toc-highlight">ç¼–å†™éƒ¨ç½²è„šæœ¬</a></li></ul></li><li><a href="#è¿è¡Œéƒ¨ç½²è„šæœ¬" class="table-of-contents__link toc-highlight">è¿è¡Œéƒ¨ç½²è„šæœ¬</a></li><li><a href="#åœ¨-ts-é¡¹ç›®ä¸­å¼•ç”¨" class="table-of-contents__link toc-highlight">åœ¨ TS é¡¹ç›®ä¸­å¼•ç”¨</a></li><li><a href="#åœ¨-js-é¡¹ç›®ä¸­å¼•ç”¨" class="table-of-contents__link toc-highlight">åœ¨ JS é¡¹ç›®ä¸­å¼•ç”¨</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.247f801c.js"></script>
<script src="/assets/js/main.5b72373d.js"></script>
</body>
</html>