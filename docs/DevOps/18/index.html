<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Aoki çš„è‡ªç•™åœ° RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Aoki çš„è‡ªç•™åœ° Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Aoki çš„è‡ªç•™åœ°" href="/opensearch.xml"><title data-react-helmet="true">[DevOps] Dockerä¸‰å‰‘å®¢ | Aoki çš„è‡ªç•™åœ°</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://phero.live/docs/DevOps/18"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="[DevOps] Dockerä¸‰å‰‘å®¢ | Aoki çš„è‡ªç•™åœ°"><meta data-react-helmet="true" name="description" content="Docker ä¸‰å‰‘å®¢ä»‹ç»"><meta data-react-helmet="true" property="og:description" content="Docker ä¸‰å‰‘å®¢ä»‹ç»"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://phero.live/docs/DevOps/18"><link data-react-helmet="true" rel="alternate" href="https://phero.live/docs/DevOps/18" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://phero.live/docs/DevOps/18" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BMRZNSN9O0-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b35462c9.css">
<link rel="preload" href="/assets/js/runtime~main.dc09de2b.js" as="script">
<link rel="preload" href="/assets/js/main.283c929e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Aoki</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">ç¬”è®°</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/aokikoko" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">æˆ‘çš„çŸ¥è¯†åº“ ğŸ˜€</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/CSS/transition-animation-transform">CSS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/DocusaurusTips/code-theme">Docusaurusä½¿ç”¨æŠ€å·§</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/TypeScript/basic-types">TypeScript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/architecture/history">æ¶æ„</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Algorithm/algo">ç®—æ³•</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Another/bigo">interview2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Cli/ESLint">Cli</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/DevOps/prometheus">DevOps</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/prometheus">[DevOps] æ™®ç½—ç±³ä¿®æ–¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/daima">[DevOps] ä»£ç æ›´æ–°æ–¹æ³•</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/jenkins">[DevOps] jenkins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/paas">[DevOps] å®¹å™¨-è™šæ‹ŸåŒ–</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/docker1">[DevOps] å®¹å™¨æŠ€æœ¯ç®¡ç†å·¥å…·-Docker(ä¸Š)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/docker2">[DevOps] å®¹å™¨æŠ€æœ¯ç®¡ç†å·¥å…·-Docker(ä¸­)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/docker3">[DevOps] å®¹å™¨æŠ€æœ¯ç®¡ç†å·¥å…·-Docker(ä¸‹)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/dockercompose">[DevOps] å®¹å™¨ç¼–æ’-docker compose</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/autopublish">[DevOps] ä»£ç è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/DevOps/18">[DevOps] Dockerä¸‰å‰‘å®¢</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/kubernetes">[DevOps] kubernetes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Http/OptionsRequest">Http</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Java/basic">Java</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Linux/basic">Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Mysql/case">Mysql</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Nginx/sign">Nginx</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/Node.js/buffer">Node.js</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/React/jsx">React</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/interview/http">interview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/ecma">javascript</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_eoK2"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_e+kA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>[DevOps] Dockerä¸‰å‰‘å®¢</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="docker-ä¸‰å‰‘å®¢ä»‹ç»">Docker ä¸‰å‰‘å®¢ä»‹ç»<a class="hash-link" href="#docker-ä¸‰å‰‘å®¢ä»‹ç»" title="Direct link to heading">â€‹</a></h2><p>ä¸ºäº†æŠŠå®¹å™¨åŒ–æŠ€æœ¯çš„ä¼˜ç‚¹å‘æŒ¥å¾—æ›´å¥½ï¼Œdocker å…¬å¸å…ˆåæ¨å‡ºäº†ä¸‰å¤§æŠ€æœ¯:</p><ul><li>docker-machine</li><li>docker-compose</li><li>docker-swarm</li></ul><p>ä½¿ç”¨&quot;ä¸‰å‰‘å®¢&quot;å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³ docker host ç»´æŠ¤,å¤šå®¹å™¨ç¼–æ’éƒ¨ç½²,å¤šä¸ª docker host é›†ç¾¤çš„å„ä¸ªéš¾é¢˜ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="docker-machine">Docker machine<a class="hash-link" href="#docker-machine" title="Direct link to heading">â€‹</a></h2><p>docker ä½¿ç”¨äº† linux çš„å†…æ ¸æŠ€æœ¯(namespace,cgroup ç­‰),é‚£ä¹ˆå¦‚æœæˆ‘æƒ³åœ¨ windows æˆ– Mac ç³»ç»Ÿä¸Šè¿è¡Œ docker æ€ä¹ˆåŠå‘¢?</p><p>ç­”æ¡ˆæ˜¯å€ŸåŠ©è™šæ‹Ÿæœºæ¥å®ç°,ä¹Ÿå°±æ˜¯è¯´æˆ‘åœ¨ windows æˆ– Mac ä¸Šè¿è¡Œä¸€ä¸ª linux è™šæ‹Ÿæœº,å†åœ¨è™šæ‹Ÿæœºé‡Œè¿è¡Œ dockerã€‚</p><p><img alt="machine" src="/assets/images/machine-51d3a5969d8635bdd78c2cf2f762871d.JPG"></p><p>docker-machine å°±æ˜¯ docker å…¬å¸å®˜æ–¹æå‡ºçš„,ç”¨äºåœ¨å„ç§å¹³å°ä¸Šå¿«é€Ÿåˆ›å»ºå…·æœ‰ docker æœåŠ¡çš„è™šæ‹Ÿæœºçš„æŠ€æœ¯.</p><p>å‚è€ƒ: <a href="https://docs.docker.com/machine/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/machine/</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="docker-compose">Docker compose<a class="hash-link" href="#docker-compose" title="Direct link to heading">â€‹</a></h2><p>ç”¨å®¹å™¨è¿è¡Œä¸€ä¸ªæœåŠ¡,éœ€è¦ä½¿ç”¨ docker run å‘½ä»¤ã€‚ä½†å¦‚æœæˆ‘è¦è¿è¡Œå¤šä¸ªæœåŠ¡å‘¢? å‡è®¾æˆ‘è¦è¿è¡Œä¸€ä¸ª web æœåŠ¡,è¿˜è¦è¿è¡Œä¸€ä¸ª db æœåŠ¡,é‚£ä¹ˆæ˜¯ç”¨ä¸€ä¸ªå®¹å™¨è¿è¡Œ,è¿˜æ˜¯ç”¨å¤šä¸ªå®¹å™¨è¿è¡Œå‘¢?</p><p>ä¸€ä¸ªå®¹å™¨è¿è¡Œå¤šä¸ªæœåŠ¡ä¼šé€ æˆé•œåƒçš„å¤æ‚åº¦æé«˜,docker å€¾å‘äºä¸€ä¸ªå®¹å™¨è¿è¡Œä¸€ä¸ªåº”ç”¨ã€‚</p><p>é‚£ä¹ˆå¤æ‚çš„æ¶æ„å°±ä¼šéœ€è¦å¾ˆå¤šçš„å®¹å™¨,å¹¶ä¸”éœ€è¦å®ƒä»¬ä¹‹é—´æœ‰å…³è”(å®¹å™¨ä¹‹é—´çš„ä¾èµ–å’Œè¿æ¥)å°±æ›´å¤æ‚äº†ã€‚</p><p>è¿™ä¸ªå¤æ‚çš„é—®é¢˜éœ€è¦è§£å†³,è¿™å°±æ¶‰åŠåˆ°äº†<code>å®¹å™¨ç¼–æ’</code>çš„é—®é¢˜äº†ã€‚</p><p>docker-compose å°±æ˜¯å¯ä»¥åšå®¹å™¨ç¼–æ’çš„å°å·¥å…·ï¼Œå®ƒå¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰å¤šä¸ªå®¹å™¨,åªç”¨ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥è®©ä¸€åˆ‡å°±ç»ªå¹¶è¿è¡Œã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="docker-compose-å®‰è£…">docker-compose å®‰è£…<a class="hash-link" href="#docker-compose-å®‰è£…" title="Direct link to heading">â€‹</a></h3><p>æ–¹æ³• 1: ä½¿ç”¨ pip å®‰è£…</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># yum install epel-release -y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># yum install python2-pip -y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># pip2.7 install docker-compose</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¸è½½æ–¹æ³•:</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># pip uninstall docker-compose</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ–¹æ³• 2: ç›´æ¥ä¸‹è½½</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># curl -L</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://github.com/docker/compose/releases/download/1.24.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">1/docker-compose-</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">uname</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> -s</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">-</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">uname</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> -m</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> -o</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/usr/local/bin/docker-compose</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># chmod +x /usr/local/bin/docker-compose</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¸è½½æ–¹æ³•:</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># rm /usr/local/bin/docker-compose</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å®‰è£…å®ŒåéªŒè¯</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># docker-compose -v</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker-compose</span><span class="token plain"> version </span><span class="token number">1.24</span><span class="token plain">.1, build </span><span class="token number">4667896</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ä½¿ç”¨-docker-compose-çš„ä¸‰ä¸ªæ­¥éª¤">ä½¿ç”¨ docker-compose çš„ä¸‰ä¸ªæ­¥éª¤<a class="hash-link" href="#ä½¿ç”¨-docker-compose-çš„ä¸‰ä¸ªæ­¥éª¤" title="Direct link to heading">â€‹</a></h3><p>Docker Compose å°†æ‰€ç®¡ç†çš„å®¹å™¨åˆ†ä¸ºä¸‰å±‚</p><ol><li>å·¥ç¨‹ï¼ˆprojectï¼‰</li><li>æœåŠ¡ï¼ˆserviceï¼‰</li><li>å®¹å™¨ï¼ˆcontaienrï¼‰</li></ol><p>Docker Compose è¿è¡Œçš„ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆdocker-compose.yml,extends æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡æ–‡ä»¶ç­‰ï¼‰ç»„æˆä¸€ä¸ªå·¥ç¨‹ï¼Œè‹¥æ— ç‰¹æ®ŠæŒ‡å®šå·¥ç¨‹åå³ä¸ºå½“å‰ç›®å½•åã€‚</p><p>ä¸€ä¸ªå·¥ç¨‹å½“ä¸­å¯åŒ…å«å¤šä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ä¸­å®šä¹‰äº†å®¹å™¨è¿è¡Œçš„é•œåƒï¼Œå‚æ•°ï¼Œä¾èµ–ã€‚</p><p>ä¸€ä¸ªæœåŠ¡å½“ä¸­å¯åŒ…æ‹¬å¤šä¸ªå®¹å™¨å®ä¾‹</p><p>ä½¿ç”¨ Compose åŸºæœ¬ä¸Šåˆ†ä¸ºä¸‰æ­¥ï¼š</p><ol><li>Dockerfile å®šä¹‰åº”ç”¨çš„è¿è¡Œç¯å¢ƒï¼ˆé•œåƒ)</li><li>docker-compose.yml å®šä¹‰ç»„æˆåº”ç”¨çš„å„æœåŠ¡</li><li>docker-compose up æ„å»ºå¹¶å¯åŠ¨æ•´ä¸ªåº”ç”¨</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="docker-compose-å¸¸è§è¯­æ³•">docker compose å¸¸è§è¯­æ³•<a class="hash-link" href="#docker-compose-å¸¸è§è¯­æ³•" title="Direct link to heading">â€‹</a></h2><p>docker compose ä½¿ç”¨.yml æˆ–.yaml åç¼€</p><p>å‚è€ƒ: <a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/compose-file/</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="build">build<a class="hash-link" href="#build" title="Direct link to heading">â€‹</a></h3><p>æŒ‡å®šé•œåƒæ„å»ºæ—¶çš„ dockerfile ç›®å½•,æ ¼å¼ä¸€èˆ¬ä¸ºç»å¯¹è·¯å¾„ç›®å½•æˆ–ç›¸å¯¹è·¯å¾„ç›®å½•(dockerfile éœ€è¦å‘½åä¸º Dockerfile)</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">build: /path/to/build/dir</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">æˆ–è€…</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">build: ./dir</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="image">image<a class="hash-link" href="#image" title="Direct link to heading">â€‹</a></h3><p>æŒ‡å®šè¦å¯åŠ¨å®¹å™¨çš„é•œåƒ</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: redis</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: ubuntu:14.04</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: tutum/influxdb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: example-registry.com:4000/postgresql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: a4bc65fd</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¦‚æœé•œåƒä¸å­˜åœ¨,compose å°è¯•æ‹‰å®ƒ</p><p>å¦‚æœæŒ‡å®šäº†æ„å»º, å¯ä»¥ä½¿ç”¨æŒ‡å®šçš„é€‰é¡¹æ„å»ºå®ƒ,å¹¶ä½¿ç”¨æŒ‡å®šçš„ tag è¿›è¡Œæ ‡è®°</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="environment">environment<a class="hash-link" href="#environment" title="Direct link to heading">â€‹</a></h3><p>è®¾ç½®é•œåƒå˜é‡ï¼Œå®ƒå¯ä»¥ä¿å­˜å˜é‡åˆ°é•œåƒé‡Œé¢ï¼Œä¹Ÿå°±æ˜¯è¯´å¯åŠ¨çš„å®¹å™¨ä¹Ÿä¼šåŒ…å«è¿™äº›å˜é‡è®¾ç½®</p><p>environment å’Œ Dockerfile ä¸­çš„ ENV æŒ‡ä»¤ä¸€æ ·ä¼šæŠŠå˜é‡ä¸€ç›´ä¿å­˜åœ¨é•œåƒå®¹å™¨ä¸­</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">environment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RACK_ENV: development</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SHOW: </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;true&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">æˆ–</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">environment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">RACK_ENV</span><span class="token operator">=</span><span class="token plain">development</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token operator">=</span><span class="token plain">true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="expose">expose<a class="hash-link" href="#expose" title="Direct link to heading">â€‹</a></h3><p>è¿™ä¸ªæ ‡ç­¾ä¸ Dockerfile ä¸­çš„ EXPOSE æŒ‡ä»¤ä¸€æ ·ï¼Œç”¨äºæŒ‡å®šæš´éœ²çš„ç«¯å£ï¼Œä½†åªå°†ç«¯å£æš´éœ²ç»™è¿æ¥çš„æœåŠ¡ï¼Œè€Œä¸æš´éœ²ç»™ä¸»æœº.</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">expose:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;8000&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ports">ports<a class="hash-link" href="#ports" title="Direct link to heading">â€‹</a></h3><p>æ˜ å°„ç«¯å£ï¼Œå¯ä»¥ä½¿ç”¨ HOST:CONTAINER çš„æ–¹å¼æŒ‡å®šç«¯å£ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå®¹å™¨ç«¯å£ï¼ˆé€‰æ‹©ä¸´æ—¶ä¸»æœºç«¯å£ï¼‰ï¼Œå®¿ä¸»æœºä¼šéšæœºæ˜ å°„ç«¯å£</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3000-3005&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;8000:8000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;9090-9091:8080-8081&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;49100:22&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;127.0.0.1:8001:8001&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;127.0.0.1:5000-5010:5000-5010&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;6060:6060/udp&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="restart">restart<a class="hash-link" href="#restart" title="Direct link to heading">â€‹</a></h3><p>æŒ‡å®š Docker å®¹å™¨çš„é‡å¯ç­–ç•¥</p><p>é»˜è®¤å€¼ä¸º no ï¼Œå³åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šé‡æ–°å¯åŠ¨å®¹å™¨</p><p>å½“å€¼ä¸º always æ—¶ï¼Œå®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡æ–°å¯åŠ¨ï¼›</p><p>å½“å€¼ä¸º on-failure æ—¶ï¼Œå½“å‡ºç° on-failure æŠ¥é”™ï¼ˆéæ­£å¸¸é€€å‡ºï¼Œé€€å‡ºçŠ¶æ€é 0ï¼‰,æ‰ä¼šé‡å¯å®¹å™¨</p><p>å½“å€¼ä¸º unless-stopped æ—¶, åœ¨å®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯å®¹å™¨ï¼Œä½†æ˜¯ä¸è€ƒè™‘åœ¨ Docker å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶å°±å·²ç»åœæ­¢äº†çš„å®¹å™¨</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">restart: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;no&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">restart: on-failure</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">restart: on-failure:3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">restart: unless-stopped</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="volume">volume<a class="hash-link" href="#volume" title="Direct link to heading">â€‹</a></h3><p>æ•°æ®å·æŒ‚è½½ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ HOST:CONTAINER è¿™æ ·çš„æ ¼å¼æˆ–è€…ä½¿ç”¨ HOST:CONTAINER:ro è¿™æ ·çš„æ ¼å¼ï¼Œro ä»£è¡¨æ•°æ®å·æ˜¯åªè¯»çš„</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># åªæ˜¯æŒ‡å®šä¸€ä¸ªè·¯å¾„ï¼ŒDocker ä¼šè‡ªåŠ¨åœ¨åˆ›å»ºä¸€ä¸ªæ•°æ®å·ï¼ˆè¿™ä¸ªè·¯å¾„æ˜¯å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">å†…éƒ¨çš„ï¼‰ã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- /var/lib/mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ä½¿ç”¨ç»å¯¹è·¯å¾„æŒ‚è½½æ•°æ®å·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- /opt/data:/var/lib/mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ä»¥Composeé…ç½®æ–‡ä»¶ä¸ºä¸­å¿ƒçš„ç›¸å¯¹è·¯å¾„ä½œä¸ºæ•°æ®å·æŒ‚è½½åˆ°å®¹å™¨ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- ./cache:/tmp/cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ä½¿ç”¨ç”¨æˆ·çš„ç›¸å¯¹è·¯å¾„ï¼ˆ~/ è¡¨ç¤ºçš„ç›®å½•æ˜¯ /home/&lt;ç”¨æˆ·ç›®å½•&gt;/ æˆ–è€…</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/root/ï¼‰ã€‚</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- ~/configs:/etc/configs/:ro</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># å·²ç»å­˜åœ¨çš„å‘½åçš„æ•°æ®å·ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- datavolume:/var/lib/mysql</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="depends_on">depends_on<a class="hash-link" href="#depends_on" title="Direct link to heading">â€‹</a></h3><p>æ­¤æ ‡ç­¾è§£å†³äº†å®¹å™¨çš„ä¾èµ–ã€å¯åŠ¨å…ˆåçš„é—®é¢˜</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">version: </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  web:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    build: </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    depends_on:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - db</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - redis</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  redis:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image: redis</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  db:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image: mysql</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä½¿ç”¨ docker-compose up web å¯åŠ¨,ä¼šå…ˆå¯åŠ¨ redis å’Œ db,å†å¯åŠ¨ web</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="links">links<a class="hash-link" href="#links" title="Direct link to heading">â€‹</a></h3><p>é“¾æ¥åˆ°å…¶å®ƒæœåŠ¡çš„ä¸­çš„å®¹å™¨, ä¸ link è¿æ¥ä¸€æ ·æ•ˆæœï¼Œä¼šè¿æ¥åˆ°å…¶å®ƒæœåŠ¡ä¸­çš„å®¹å™¨</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">web:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">links:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- db</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- db:database</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- redis</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="docker-compose-åŸºç¡€åº”ç”¨æ¡ˆä¾‹ä¸€">docker-compose åŸºç¡€åº”ç”¨æ¡ˆä¾‹ä¸€<a class="hash-link" href="#docker-compose-åŸºç¡€åº”ç”¨æ¡ˆä¾‹ä¸€" title="Direct link to heading">â€‹</a></h2><p>å‚è€ƒ: <a href="https://docs.docker.com/compose/gettingstarted/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/gettingstarted/</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ¡ˆä¾‹-1-wordpress-åº”ç”¨">æ¡ˆä¾‹ 1: wordpress åº”ç”¨<a class="hash-link" href="#æ¡ˆä¾‹-1-wordpress-åº”ç”¨" title="Direct link to heading">â€‹</a></h3><p>1, åˆ›å»ºä¸€ä¸ªåä¸º wordpress çš„ project(å·¥ç¨‹)</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mkdir -p /doker-compose/wordpress</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># cd /doker-compose/wordpress</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>2, åˆ›å»º docker-compose.yml</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel wordpress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim docker-compose.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version: </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">db:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: mysql:5.7</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;./data:/var/lib/mysql&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">environment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MYSQL_ROOT_PASSWORD: wordpress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MYSQL_DATABASE: wordpress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MYSQL_USER: wordpress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MYSQL_PASSWORD: wordpress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">expose:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3306&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wordpress:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">depends_on:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- db</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: wordpress:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">links:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- db</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;8010:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">environment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORDPRESS_DB_HOST: db:3306</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WORDPRESS_DB_PASSWORD: wordpress</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>è¯´æ˜:</p><p>è¿™ä¸ªåº”ç”¨å®šä¹‰äº†ä¸¤ä¸ªå®¹å™¨æœåŠ¡ï¼šdb, wordpress</p><p>db å®¹å™¨é€šè¿‡ mysql:5.7 é•œåƒå¯åŠ¨</p><ul><li>MySQL çš„æ•°æ®ç›®å½•æŒ‚è½½åˆ°å½“å‰ç›®å½•./dataï¼Œæ­¤ç›®å½•ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º</li><li>å®¹å™¨é‡å¯ç­–ç•¥ä¸º always</li><li>è®¾ç½®äº†è¿æ¥ mysql çš„ 4 ä¸ªå˜é‡</li></ul><p>wordpress å®¹å™¨é€šè¿‡ wordpress:latest å¯åŠ¨</p><ul><li>éœ€è¦ db å®¹å™¨å…ˆå¯åŠ¨å†å¯åŠ¨ wordpress å®¹å™¨</li><li>wordpress å®¹å™¨è¦ link è¿æ¥ db å®¹å™¨</li><li>wordpress å®¹å™¨å°† 80 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 8010 ç«¯å£</li><li>å®¹å™¨é‡å¯ç­–ç•¥ä¸º always</li><li>è®¾ç½®è¿æ¥æ•°æ®åº“çš„å˜é‡</li></ul><p>3, å¯åŠ¨</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel wordpress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker-compose up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¦‚æœæœ¬åœ°æ²¡æœ‰é•œåƒ,ä¸‹è½½çš„ä¸¤ä¸ªé•œåƒæ¯”è¾ƒå¤§</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel wordpress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker images</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REPOSITORY TAG IMAGE ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATED SIZE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql </span><span class="token number">5.7</span><span class="token plain"> e9c354083de7</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">3</span><span class="token plain"> days ago 373MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wordpress latest 4ba1e63bd20c</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">8</span><span class="token plain"> days ago 501MB</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>4, è®¿é—®</p><p>è®¿é—®å®¹å™¨ä¸»æœºçš„ 8010 ç«¯å£</p><p>5, ä¸ç”¨äº†å¯ä»¥å…³é—­å¹¶åˆ é™¤</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel wordpress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker-compose stop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Stopping wordpress_wordpress_1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Stopping wordpress_db_1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel wordpress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker-compose rm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Going to remove wordpress_wordpress_1, wordpress_db_1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Are you sure? </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">yN</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> y è¾“</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">å…¥yç¡®è®¤åˆ é™¤å®¹å™¨</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Removing wordpress_wordpress_1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Removing wordpress_db_1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ¡ˆä¾‹-2-haproxy-åº”ç”¨">æ¡ˆä¾‹ 2: haproxy åº”ç”¨<a class="hash-link" href="#æ¡ˆä¾‹-2-haproxy-åº”ç”¨" title="Direct link to heading">â€‹</a></h3><p>1, åˆ›å»ºä¸€ä¸ªå·¥ç¨‹ç›®å½• haproxy</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mkdir -p /docker-compose/haproxy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel haproxy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># cd /docker-compose/haproxy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>2, å‡†å¤‡ haproxy.cfg é…ç½®æ–‡ä»¶</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel haproxy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim haproxy.cfg</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">global</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">log </span><span class="token number">127.0</span><span class="token plain">.0.1 local0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">log </span><span class="token number">127.0</span><span class="token plain">.0.1 local1 notice</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">defaults</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">log global</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mode http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">option httplog</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">option dontlognull</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">timeout</span><span class="token plain"> connect 5000ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">timeout</span><span class="token plain"> client 50000ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">timeout</span><span class="token plain"> server 50000ms</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">stats uri /status</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">frontend balancer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">bind</span><span class="token plain"> </span><span class="token number">0.0</span><span class="token plain">.0.0:80</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mode http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">default_backend web_backends</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">backend web_backends</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mode http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">option forwardfor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">balance roundrobin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">server web1 web1:80 check</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">server web2 web2:80 check</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">server web3 web3:80 check</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">option httpchk GET /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">http-check </span><span class="token function" style="color:rgb(80, 250, 123)">expect</span><span class="token plain"> status </span><span class="token number">200</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>3, åˆ›å»ºç¼–æ’è„šæœ¬</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm1 haproxy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim docker-compose.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">web1:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: httpd:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- ./httpd1:/usr/local/apache2/htdocs/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">expose:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">web2:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: httpd:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- ./httpd2:/usr/local/apache2/htdocs/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">expose:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">web3:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: httpd:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- ./httpd3:/usr/local/apache2/htdocs/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">expose:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image: haproxy:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- ./haproxy.cfg:/usr/local/etc/haproxy/haproxy.cfg:ro</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">links:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- web1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- web2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- web3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;80:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">expose:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;80&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>4, å¯åŠ¨åº”ç”¨</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel haproxy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker-compose up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>5, åœ¨æŒ‚è½½ç›®å½•å»ºç«‹ä¸åŒçš„ä¸»é¡µç”¨äºæµ‹è¯•</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel haproxy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># echo web1 &gt; httpd1/index.html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel haproxy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># echo web2 &gt; httpd2/index.html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@daniel haproxy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># echo web3 &gt; httpd3/index.html</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>6, è®¿é—® http:// docker å®¿ä¸»æœº IP :80 éªŒè¯æ˜¯å¦è´Ÿè½½å‡è¡¡è°ƒåº¦</p><p>è®¿é—® http:// docker å®¿ä¸»æœº IP :80/status éªŒè¯æ˜¯å¦æœ‰çŠ¶æ€é¡µé¢</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/aokikoko/aokikoko.github.io/blob/main/website/docs/DevOps/18.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/DevOps/autopublish"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">[DevOps] ä»£ç è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿ</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/DevOps/kubernetes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">[DevOps] kubernetes</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#docker-ä¸‰å‰‘å®¢ä»‹ç»" class="table-of-contents__link toc-highlight">Docker ä¸‰å‰‘å®¢ä»‹ç»</a></li><li><a href="#docker-machine" class="table-of-contents__link toc-highlight">Docker machine</a></li><li><a href="#docker-compose" class="table-of-contents__link toc-highlight">Docker compose</a><ul><li><a href="#docker-compose-å®‰è£…" class="table-of-contents__link toc-highlight">docker-compose å®‰è£…</a></li><li><a href="#ä½¿ç”¨-docker-compose-çš„ä¸‰ä¸ªæ­¥éª¤" class="table-of-contents__link toc-highlight">ä½¿ç”¨ docker-compose çš„ä¸‰ä¸ªæ­¥éª¤</a></li></ul></li><li><a href="#docker-compose-å¸¸è§è¯­æ³•" class="table-of-contents__link toc-highlight">docker compose å¸¸è§è¯­æ³•</a><ul><li><a href="#build" class="table-of-contents__link toc-highlight">build</a></li><li><a href="#image" class="table-of-contents__link toc-highlight">image</a></li><li><a href="#environment" class="table-of-contents__link toc-highlight">environment</a></li><li><a href="#expose" class="table-of-contents__link toc-highlight">expose</a></li><li><a href="#ports" class="table-of-contents__link toc-highlight">ports</a></li><li><a href="#restart" class="table-of-contents__link toc-highlight">restart</a></li><li><a href="#volume" class="table-of-contents__link toc-highlight">volume</a></li><li><a href="#depends_on" class="table-of-contents__link toc-highlight">depends_on</a></li><li><a href="#links" class="table-of-contents__link toc-highlight">links</a></li></ul></li><li><a href="#docker-compose-åŸºç¡€åº”ç”¨æ¡ˆä¾‹ä¸€" class="table-of-contents__link toc-highlight">docker-compose åŸºç¡€åº”ç”¨æ¡ˆä¾‹ä¸€</a><ul><li><a href="#æ¡ˆä¾‹-1-wordpress-åº”ç”¨" class="table-of-contents__link toc-highlight">æ¡ˆä¾‹ 1: wordpress åº”ç”¨</a></li><li><a href="#æ¡ˆä¾‹-2-haproxy-åº”ç”¨" class="table-of-contents__link toc-highlight">æ¡ˆä¾‹ 2: haproxy åº”ç”¨</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.dc09de2b.js"></script>
<script src="/assets/js/main.283c929e.js"></script>
</body>
</html>