"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5689],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return k}});var i=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},p=Object.keys(e);for(i=0;i<p.length;i++)t=p[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(i=0;i<p.length;i++)t=p[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=i.createContext({}),s=function(e){var n=i.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=s(e.components);return i.createElement(o.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},d=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,p=e.originalType,o=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(t),k=a,c=d["".concat(o,".").concat(k)]||d[k]||m[k]||p;return t?i.createElement(c,r(r({ref:n},u),{},{components:t})):i.createElement(c,r({ref:n},u))}));function k(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var p=t.length,r=new Array(p);r[0]=d;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var s=2;s<p;s++)r[s]=t[s];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}d.displayName="MDXCreateElement"},1275:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return o},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var i=t(7462),a=t(3366),p=(t(7294),t(3905)),r=["components"],l={title:"[TS] ts-axios(25) - \u7f16\u8bd1\u53d1\u5e03",sidebar_position:33},o=void 0,s={unversionedId:"TypeScript/ts-axios-25",id:"TypeScript/ts-axios-25",title:"[TS] ts-axios(25) - \u7f16\u8bd1\u53d1\u5e03",description:"----------------------------------------------------------------",source:"@site/docs/TypeScript/ts-axios-25.md",sourceDirName:"TypeScript",slug:"/TypeScript/ts-axios-25",permalink:"/docs/TypeScript/ts-axios-25",editUrl:"https://github.com/aokikoko/aokikoko.github.io/blob/main/website/docs/TypeScript/ts-axios-25.md",tags:[],version:"current",sidebarPosition:33,frontMatter:{title:"[TS] ts-axios(25) - \u7f16\u8bd1\u53d1\u5e03",sidebar_position:33},sidebar:"tutorialSidebar",previous:{title:"[TS] ts-axios(24) - \u5355\u5143\u6d4b\u8bd5(\u5269\u4f59\u6a21\u5757)",permalink:"/docs/TypeScript/ts-axios-24"},next:{title:"[Node] Buffer",permalink:"/docs/Node.js/buffer"}},u=[{value:"\u9700\u6c42\u5206\u6790",id:"\u9700\u6c42\u5206\u6790",children:[],level:2},{value:"\u7f16\u8bd1\u548c\u6253\u5305",id:"\u7f16\u8bd1\u548c\u6253\u5305",children:[{value:"\u4fee\u6539 rollup.config.ts",id:"\u4fee\u6539-rollupconfigts",children:[],level:3},{value:"\u4fee\u6539 package.json",id:"\u4fee\u6539-packagejson",children:[],level:3}],level:2},{value:"\u81ea\u52a8\u5316\u90e8\u7f72",id:"\u81ea\u52a8\u5316\u90e8\u7f72",children:[{value:"\u4fee\u6539 package.json",id:"\u4fee\u6539-packagejson-1",children:[],level:3},{value:"\u7f16\u5199\u90e8\u7f72\u811a\u672c",id:"\u7f16\u5199\u90e8\u7f72\u811a\u672c",children:[],level:3}],level:2},{value:"\u8fd0\u884c\u90e8\u7f72\u811a\u672c",id:"\u8fd0\u884c\u90e8\u7f72\u811a\u672c",children:[],level:2},{value:"\u5728 TS \u9879\u76ee\u4e2d\u5f15\u7528",id:"\u5728-ts-\u9879\u76ee\u4e2d\u5f15\u7528",children:[],level:2},{value:"\u5728 JS \u9879\u76ee\u4e2d\u5f15\u7528",id:"\u5728-js-\u9879\u76ee\u4e2d\u5f15\u7528",children:[],level:2}],m={toc:u};function d(e){var n=e.components,t=(0,a.Z)(e,r);return(0,p.kt)("wrapper",(0,i.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,p.kt)("hr",null),(0,p.kt)("h2",{id:"\u9700\u6c42\u5206\u6790"},"\u9700\u6c42\u5206\u6790"),(0,p.kt)("p",null,"\u524d\u9762\u7684\u7ae0\u8282\u6211\u4eec\u5b8c\u6210 ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios")," \u5e93\u7684\u4ee3\u7801\u7f16\u5199\u548c\u5355\u5143\u6d4b\u8bd5\u3002\u8fd9\u4e00\u7ae0\u6211\u4eec\u5e0c\u671b\u628a\u4ee3\u7801\u90e8\u7f72\u53d1\u5e03\u5230\u516c\u5171 ",(0,p.kt)("inlineCode",{parentName:"p"},"npm")," \u4e0a\uff0c\u4f9b\u522b\u4eba\u4e0b\u8f7d\u4f7f\u7528\u3002\u4f46\u662f\u5e76\u4e0d\u662f\u6240\u6709\u4eba\u90fd\u4f1a\u4f7f\u7528 TypeScript \u5f00\u53d1\uff0c\u4ecd\u7136\u6709\u5927\u91cf\u7684 JavaScript \u7528\u6237\uff0c\u5b83\u4eec\u662f\u4e0d\u80fd\u76f4\u63a5\u5f15\u7528 TypeScript \u4ee3\u7801\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5148\u5bf9\u6e90\u7801\u505a\u7f16\u8bd1\u548c\u6253\u5305\uff0c\u7136\u540e\u518d\u53d1\u5e03\u3002"),(0,p.kt)("p",null,"\u7531\u4e8e\u6211\u4eec\u4f1a\u628a\u5305\u53d1\u5e03\u5230\u516c\u5171\u7684 npm \u6e90\uff0c\u5982\u679c\u4f60\u8fd8\u6ca1\u6709 ",(0,p.kt)("inlineCode",{parentName:"p"},"npm")," \u8d26\u53f7\uff0c\u90a3\u4e48\u9700\u8981\u5148\u53bb",(0,p.kt)("a",{parentName:"p",href:"https://www.npmjs.com/signup"},"\u5b98\u7f51\u6ce8\u518c"),"\u3002\u6ce8\u518c\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u53bb\u7ec8\u7aef\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"npm login")," \u767b\u5f55\u3002\u8fd9\u4e2a\u6b65\u9aa4\u975e\u5e38\u91cd\u8981\uff0c\u51b3\u5b9a\u4f60\u6700\u7ec8\u80fd\u5426\u53d1\u5e03\u6210\u529f\u3002"),(0,p.kt)("h2",{id:"\u7f16\u8bd1\u548c\u6253\u5305"},"\u7f16\u8bd1\u548c\u6253\u5305"),(0,p.kt)("p",null,"\u6211\u4eec\u4f1a\u5229\u7528 ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/rollup/rollup"},"rollup")," \u6765\u6253\u5305\u6211\u4eec\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios")," \u5e93\uff0c\u5b83\u662f\u4e00\u4e2a\u975e\u5e38\u8457\u540d\u7684\u7f16\u8bd1\u6253\u5305\u5de5\u5177\uff0cVue.js \u4e5f\u662f\u5229\u7528 rollup \u7f16\u8bd1\u6253\u5305\u7684\u3002\u76f8\u6bd4 webpack\uff0c\u5b83\u975e\u5e38\u9002\u5408\u53bb\u7f16\u8bd1\u548c\u6253\u5305\u4e00\u4e9b JS \u5e93\u3002"),(0,p.kt)("p",null,"\u7531\u4e8e\u4f7f\u7528 ",(0,p.kt)("inlineCode",{parentName:"p"},"typescript-library-starter")," \u521d\u59cb\u5316\u6211\u4eec\u7684\u9879\u76ee\uff0c\u6211\u4eec\u5df2\u7ecf\u62e5\u6709\u4e86 rollup \u6253\u5305\u7684\u76f8\u5173\u914d\u7f6e\u548c\u76f8\u5173\u63d2\u4ef6\u7684\u5b89\u88c5\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u6765\u5bf9\u751f\u6210\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"rollup.config.ts")," \u505a\u5c0f\u5c0f\u7684\u4fee\u6539\u3002"),(0,p.kt)("h3",{id:"\u4fee\u6539-rollupconfigts"},"\u4fee\u6539 rollup.config.ts"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-typescript"},"import resolve from 'rollup-plugin-node-resolve'\nimport commonjs from 'rollup-plugin-commonjs'\nimport sourceMaps from 'rollup-plugin-sourcemaps'\nimport camelCase from 'lodash.camelcase'\nimport typescript from 'rollup-plugin-typescript2'\nimport json from 'rollup-plugin-json'\n\nconst pkg = require('./package.json')\n\nconst libraryName = 'axios'\n\nexport default {\n  input: `src/index.ts`,\n  output: [\n    { file: pkg.main, name: camelCase(libraryName), format: 'umd', sourcemap: true },\n    { file: pkg.module, format: 'es', sourcemap: true }\n  ],\n  // Indicate here external modules you don't wanna include in your bundle (i.e.: 'lodash')\n  external: [],\n  watch: {\n    include: 'src/**'\n  },\n  plugins: [\n    // Allow json resolution\n    json(),\n    // Compile TypeScript files\n    typescript({ useTsconfigDeclarationDir: true }),\n    // Allow bundling cjs modules (unlike webpack, rollup doesn't understand cjs)\n    commonjs(),\n    // Allow node_modules resolution, so you can use 'external' to control\n    // which external modules to include in the bundle\n    // https://github.com/rollup/rollup-plugin-node-resolve#usage\n    resolve(),\n\n    // Resolve source maps to the original source\n    sourceMaps()\n  ]\n}\n")),(0,p.kt)("p",null,"\u6ce8\u610f\u8981\u4fee\u6539\u7684\u5730\u65b9\uff0c\u628a ",(0,p.kt)("inlineCode",{parentName:"p"},"libraryName")," \u4fee\u6539\u4e3a ",(0,p.kt)("inlineCode",{parentName:"p"},"axios"),"\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"input")," \u4fee\u6539\u4e3a ",(0,p.kt)("inlineCode",{parentName:"p"},"src/index.ts"),"\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"rollup")," \u7684\u914d\u7f6e\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u7b80\u5355\u5730\u8fc7\u4e00\u4e0b\u3002"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"input")),(0,p.kt)("p",null,"\u8868\u793a\u6253\u5305\u5165\u53e3\u6587\u4ef6\u3002"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"output")),(0,p.kt)("p",null,"\u8868\u793a\u8f93\u51fa\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u5b83\u662f\u4e00\u4e2a\u5bf9\u8c61\u6570\u7ec4\uff0c\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u8f93\u51fa\u7684\u683c\u5f0f\uff0c\u6bd4\u5982 ",(0,p.kt)("inlineCode",{parentName:"p"},"umd")," \u683c\u5f0f\u3001",(0,p.kt)("inlineCode",{parentName:"p"},"es")," \u6a21\u5f0f\u7b49\u3002"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"external")),(0,p.kt)("p",null,"\u58f0\u660e\u5b83\u7684\u5916\u90e8\u4f9d\u8d56\uff0c\u53ef\u4ee5\u4e0d\u88ab\u6253\u5305\u8fdb\u53bb\u3002"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"watch")),(0,p.kt)("p",null,"\u76d1\u542c\u6587\u4ef6\u7684\u53d8\u5316\uff0c\u91cd\u65b0\u7f16\u8bd1\uff0c\u53ea\u6709\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u5f00\u542f ",(0,p.kt)("inlineCode",{parentName:"p"},"--watch")," \u624d\u751f\u6548\u3002"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"plugins")),(0,p.kt)("p",null,"\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u7684\u63d2\u4ef6\uff0c\u5176\u4e2d ",(0,p.kt)("inlineCode",{parentName:"p"},"rollup-plugin-typescript2")," \u5c31\u662f\u7528\u6765\u7f16\u8bd1 TypeScript \u6587\u4ef6\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"useTsconfigDeclarationDir")," \u8868\u793a\u4f7f\u7528 ",(0,p.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"declarationDir"),"\u3002\u5176\u5b83\u63d2\u4ef6\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u81ea\u5df1\u53bb\u67e5\u9605\u6587\u6863\u3002"),(0,p.kt)("h3",{id:"\u4fee\u6539-packagejson"},"\u4fee\u6539 package.json"),(0,p.kt)("p",null,"\u7531\u4e8e\u6211\u4eec\u5df2\u7ecf\u5728 ",(0,p.kt)("inlineCode",{parentName:"p"},"rollup.config.ts")," \u4e2d\u4fee\u6539\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"libraryName")," \u4e3a ",(0,p.kt)("inlineCode",{parentName:"p"},"axios"),"\uff0c \u90a3\u4e48\u5728 ",(0,p.kt)("inlineCode",{parentName:"p"},"package.json")," \u6587\u4ef6\u4e2d\u4f60\u9700\u8981\u505a\u76f8\u5173\u7684\u4fee\u6539\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-typescript"},'{\n  "main": "dist/axios.umd.js",\n  "module": "dist/axios.es5.js",\n  "typings": "dist/types/index.d.ts"\n}\n')),(0,p.kt)("p",null,"\u7136\u540e\u6211\u4eec\u5728\u63a7\u5236\u53f0\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"npm run build"),"\uff0c\u4f1a\u7f16\u8bd1\u8f93\u51fa ",(0,p.kt)("inlineCode",{parentName:"p"},"dist")," \u76ee\u5f55\uff0c\u5176\u4e2d ",(0,p.kt)("inlineCode",{parentName:"p"},"lib")," \u76ee\u5f55\u662f\u5355\u4e2a ",(0,p.kt)("inlineCode",{parentName:"p"},".ts")," \u6587\u4ef6\u7f16\u8bd1\u540e\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},".js")," \u6587\u4ef6\u3002",(0,p.kt)("inlineCode",{parentName:"p"},"types")," \u76ee\u5f55\u662f\u6240\u6709 ",(0,p.kt)("inlineCode",{parentName:"p"},".ts")," \u6587\u4ef6\u7f16\u8bd1\u540e\u751f\u4ea7\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},".d.ts")," \u58f0\u660e\u6587\u4ef6\u3002",(0,p.kt)("inlineCode",{parentName:"p"},"axios.es5.js")," \u662f\u7f16\u8bd1\u540e\u751f\u6210\u7684 es \u6a21\u5f0f\u7684\u5165\u53e3\u6587\u4ef6\uff0c\u7528\u5728 ",(0,p.kt)("inlineCode",{parentName:"p"},"package.json")," \u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"module")," \u5b57\u6bb5\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"axios.umd.js")," \u6587\u4ef6\u662f\u7f16\u8bd1\u540e\u751f\u6210\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"umd")," \u6a21\u5f0f\u7684\u5165\u53e3\u6587\u4ef6\uff0c\u7528\u5728 ",(0,p.kt)("inlineCode",{parentName:"p"},"package.json")," \u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"main")," \u5b57\u6bb5\u3002"),(0,p.kt)("h2",{id:"\u81ea\u52a8\u5316\u90e8\u7f72"},"\u81ea\u52a8\u5316\u90e8\u7f72"),(0,p.kt)("p",null,"\u7531\u4e8e ",(0,p.kt)("inlineCode",{parentName:"p"},"semantic-release")," \u63d2\u4ef6\u8fc7\u4e8e\u9ed1\u76d2\u4e5f\u7565\u5fae\u91cd\u91cf\uff0c\u6211\u8fd8\u662f\u51b3\u5b9a\u6559\u540c\u5b66\u4eec\u81ea\u5df1\u7f16\u5199\u81ea\u52a8\u5316\u90e8\u7f72\u811a\u672c\uff0c\u8fd9\u6837\u66f4\u7075\u6d3b\uff0c\u610f\u4e49\u4e5f\u66f4\u5927\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u573a\u666f\u662f\u7528\u4e0d\u5230\u90a3\u4e48\u591a feature \u7684\u3002"),(0,p.kt)("h3",{id:"\u4fee\u6539-packagejson-1"},"\u4fee\u6539 package.json"),(0,p.kt)("p",null,"\u53d1\u5e03\u5230 npm \u4e4b\u524d\u4f60\u9700\u8981\u4e3a\u4f60\u7684\u5305\u547d\u540d\uff0c\u7531\u4e8e ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios")," \u8fd9\u4e2a\u540d\u5b57\u5df2\u7ecf\u88ab\u5360\u7528\u4e86\uff0c\u6211\u4f7f\u7528\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios-new")," \u8fd9\u4e2a\u540d\u79f0\uff0c\u5f53\u7136\u4f60\u5b66\u5230\u8fd9\u91cc\uff0c\u5c31\u9700\u8981\u8d77\u4e00\u4e2a\u65b0\u540d\u5b57\u4e86\u3002\u53ef\u4ee5\u4f7f\u7528 ",(0,p.kt)("inlineCode",{parentName:"p"},"npm view [<@scope>/]<pkg>[@<version>]")," \u7684\u65b9\u5f0f\u53bb\u641c\u7d22\u4e00\u4e2a\u5305\u540d\u662f\u5426\u5df2\u7ecf\u5b58\u5728\uff0c\u6bd4\u5982\u4f60\u641c\u7d22 ",(0,p.kt)("inlineCode",{parentName:"p"},"npm view ts-axios-new")," \u4f1a\u53d1\u73b0\u8fd9\u4e2a\u5305\u5df2\u7ecf\u5b58\u5728\uff0c\u8fd4\u56de\u8fd9\u4e2a\u5305\u76f8\u5173\u4fe1\u606f\u3002\u5982\u679c\u4f60\u641c\u7d22 ",(0,p.kt)("inlineCode",{parentName:"p"},"npm view xxxx")," \u8fd4\u56de\u9519\u8bef 404 \u7684\u8bdd\uff0c\u90a3\u4e48\u4f60\u5c31\u53ef\u4ee5\u4f7f\u7528 ",(0,p.kt)("inlineCode",{parentName:"p"},"xxxx")," \u8fd9\u4e2a\u5305\u540d\u4e86\u3002"),(0,p.kt)("p",null,"\u5982\u679c\u4f60\u60f3\u8ba9\u4f60\u53d1\u5e03\u7684\u5305\u5173\u8054\u4f60\u7684\u4ed3\u5e93\u5730\u5740\uff0c\u53ef\u4ee5\u914d\u7f6e ",(0,p.kt)("inlineCode",{parentName:"p"},"repository")," \u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"url")," \u5b57\u6bb5\u3002"),(0,p.kt)("p",null,"\u53e6\u5916\u6211\u4eec\u589e\u52a0 2 \u4e2a npm scripts\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "prepub": "npm run test:prod && npm run build",\n  "pub": "sh release.sh"\n}\n')),(0,p.kt)("p",null,"\u5f53\u6211\u4eec\u8fd0\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"npm run pub")," \u7684\u65f6\u5019\uff0c\u4f1a\u4f18\u5148\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"prepub")," \u811a\u672c\uff0c\u5728 ",(0,p.kt)("inlineCode",{parentName:"p"},"prepub")," \u4e2d\u6211\u4eec\u8fd0\u884c\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"test:prod")," \u548c ",(0,p.kt)("inlineCode",{parentName:"p"},"build")," 2 \u4e2a\u811a\u672c\u3002",(0,p.kt)("inlineCode",{parentName:"p"},"&&")," \u7b26\u53f7\u8868\u793a\u524d\u9762\u4e00\u4e2a\u547d\u4ee4\u6267\u884c\u6210\u529f\u540e\u624d\u4f1a\u6267\u884c\u540e\u9762\u7684\u4efb\u52a1\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"npm run test:prod")," \u5b9e\u9645\u4e0a\u8fd0\u884c\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"npm run lint && npm run test -- --no-cache"),"\u3002 \u5148\u8fd0\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"lint")," \u53bb\u6821\u9a8c\u6211\u4eec\u7684\u6e90\u7801\u548c\u6d4b\u8bd5\u6587\u4ef6\u662f\u5426\u9075\u5faa ",(0,p.kt)("inlineCode",{parentName:"p"},"tslint")," \u89c4\u8303\uff0c\u518d\u8fd0\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"test")," \u53bb\u8dd1\u6d4b\u8bd5\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"npm run build")," \u5b9e\u9645\u4e0a\u8fd0\u884c\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"tsc --module commonjs"),"\u3001",(0,p.kt)("inlineCode",{parentName:"p"},"rollup -c rollup.config.ts")," \u548c ",(0,p.kt)("inlineCode",{parentName:"p"},"typedoc --out docs --target es6 --theme minimal --mode file src"),"\u3002\u5148\u8fd0\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"tsc")," \u53bb\u7f16\u8bd1\u6211\u4eec\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"TypeScript")," \u6587\u4ef6\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"dist/lib")," \u548c ",(0,p.kt)("inlineCode",{parentName:"p"},"dist/types")," \u4e0b\u7684\u6587\u4ef6\u5c31\u662f\u8be5\u547d\u4ee4\u4ea7\u751f\u7684\uff0c\u7136\u540e\u8fd0\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"rollup")," \u53bb\u6784\u5efa ",(0,p.kt)("inlineCode",{parentName:"p"},"axios.umd.js")," \u53ca ",(0,p.kt)("inlineCode",{parentName:"p"},"axios.es.js"),"\uff0c\u6700\u540e\u8fd0\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"typedoc")," \u53bb\u6784\u5efa\u9879\u76ee\u7684\u6587\u6863\u3002"),(0,p.kt)("p",null,"\u8fd0\u884c\u5b8c ",(0,p.kt)("inlineCode",{parentName:"p"},"prepub")," \u540e\u5c31\u4f1a\u518d\u8fd0\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"pub")," \u547d\u4ee4\uff0c\u5b9e\u9645\u4e0a\u6267\u884c\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"sh release.sh")," \u547d\u4ee4\uff0c\u4f46\u662f\u76ee\u524d\u6211\u4eec\u6ca1\u6709\u8fd9\u4e2a\u811a\u672c\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u9700\u8981\u6765\u7f16\u5199\u90e8\u7f72\u811a\u672c ",(0,p.kt)("inlineCode",{parentName:"p"},"release.sh"),"\u3002"),(0,p.kt)("h3",{id:"\u7f16\u5199\u90e8\u7f72\u811a\u672c"},"\u7f16\u5199\u90e8\u7f72\u811a\u672c"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"release.sh"),"\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},'#!/usr/bin/env sh\nset -e\necho "Enter release version: "\nread VERSION\nread -p "Releasing $VERSION - are you sure? (y/n)" -n 1 -r\necho  # (optional) move to a new line\nif [[ $REPLY =~ ^[Yy]$ ]]\nthen\n  echo "Releasing $VERSION ..."\n\n  # commit\n  git add -A\n  git commit -m "[build] $VERSION"\n  npm version $VERSION --message "[release] $VERSION"\n  git push origin master\n\n  # publish\n  npm publish\nfi\n')),(0,p.kt)("p",null,"\u90e8\u7f72\u811a\u672c\u662f shell \u811a\u672c\uff0cshell \u811a\u672c\u5c31\u662f\u5c01\u88c5\u4e86\u591a\u884c\u63a7\u5236\u53f0\u547d\u4ee4\uff0c\u6765\u9010\u884c\u89e3\u91ca\u4ed6\u4eec\u7684\u542b\u4e49\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"#!/usr/bin/env sh")," \u7528\u6765\u8868\u793a\u5b83\u662f\u4e00\u4e2a shell \u811a\u672c\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"set -e")," \u544a\u8bc9\u811a\u672c\u5982\u679c\u6267\u884c\u7ed3\u679c\u4e0d\u4e3a true \u5219\u9000\u51fa\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},'echo "Enter release version: "')," \u5728\u63a7\u5236\u53f0\u8f93\u51fa ",(0,p.kt)("inlineCode",{parentName:"p"},"Enter release version:"),"\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"read VERSION")," \u8868\u793a\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u503c\uff0c\u5e76\u8d4b\u503c\u7ed9 $VERSION \u53d8\u91cf\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},'read -p "Releasing $VERSION - are you sure? (y/n)" -n 1 -r'),"\uff0c\u5176\u4e2d ",(0,p.kt)("inlineCode",{parentName:"p"},"read -p")," \u8868\u793a\u7ed9\u51fa\u63d0\u793a\u7b26\uff0c\u540e\u9762\u63a5\u7740 ",(0,p.kt)("inlineCode",{parentName:"p"},"Releasing $VERSION - are you sure? (y/n)")," \u63d0\u793a\u7b26\uff1b",(0,p.kt)("inlineCode",{parentName:"p"},"-n 1")," \u8868\u793a\u9650\u5b9a\u6700\u591a\u53ef\u4ee5\u6709 1 \u4e2a\u5b57\u7b26\u53ef\u4ee5\u4f5c\u4e3a\u6709\u6548\u8bfb\u5165\uff1b",(0,p.kt)("inlineCode",{parentName:"p"},"-r")," \u8868\u793a\u7981\u6b62\u53cd\u659c\u7ebf\u7684\u8f6c\u4e49\u529f\u80fd\u3002\u56e0\u4e3a\u6211\u4eec\u7684 read \u5e76\u6ca1\u6709\u6307\u5b9a\u53d8\u91cf\u540d\uff0c\u90a3\u4e48\u9ed8\u8ba4\u8fd9\u4e2a\u8f93\u5165\u8bfb\u53d6\u503c\u4f1a\u8d4b\u503c\u7ed9 ",(0,p.kt)("inlineCode",{parentName:"p"},"$REPLY")," \u53d8\u91cf\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"echo")," \u8f93\u51fa\u7a7a\u503c\u8868\u793a\u8df3\u5230\u4e00\u4e2a\u65b0\u884c\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"#")," \u5728 shell \u811a\u672c\u4e2d\u8868\u793a\u6ce8\u91ca\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"if [[ $REPLY =~ ^[Yy]$ ]]")," \u8868\u793a shell \u811a\u672c\u4e2d\u7684\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5\uff0c\u5224\u65ad ",(0,p.kt)("inlineCode",{parentName:"p"},"$REPLY")," \u662f\u4e0d\u662f\u5927\u5c0f\u5199\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"y"),"\uff0c\u5982\u679c\u6ee1\u8db3\uff0c\u5219\u8d70\u5230\u540e\u9762\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"then")," \u903b\u8f91\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},'echo "Releasing $VERSION ..."'),"  \u5728\u63a7\u5236\u53f0\u8f93\u51fa ",(0,p.kt)("inlineCode",{parentName:"p"},"Releasing $VERSION ..."),"\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"git add -A")," \u8868\u793a\u628a\u4ee3\u7801\u6240\u6709\u53d8\u5316\u63d0\u4ea4\u5230\u6682\u5b58\u533a\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},'git commit -m "[build] $VERSION"')," \u8868\u793a\u63d0\u4ea4\u4ee3\u7801\uff0c\u63d0\u4ea4\u6ce8\u91ca\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"[build] $VERSION"),"\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},'npm version $VERSION --message "[release] $VERSION"')," \u662f\u4fee\u6539 ",(0,p.kt)("inlineCode",{parentName:"p"},"package.json")," \u4e2d\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"version")," \u5b57\u6bb5\u5230 ",(0,p.kt)("inlineCode",{parentName:"p"},"$VERSION"),"\uff0c\u5e76\u4e14\u63d0\u4ea4\u4e00\u6761\u4fee\u6539\u8bb0\u5f55\uff0c\u63d0\u4ea4\u6ce8\u91ca\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"[release] $VERSION"),"\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"git push origin master")," \u662f\u628a\u4ee3\u7801\u53d1\u5e03\u5230\u4e3b\u5e72\u5206\u652f\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"npm publish")," \u662f\u628a\u4ed3\u5e93\u53d1\u5e03\u5230 ",(0,p.kt)("inlineCode",{parentName:"p"},"npm")," \u4e0a\uff0c\u6211\u4eec\u4f1a\u628a ",(0,p.kt)("inlineCode",{parentName:"p"},"dist")," \u76ee\u5f55\u4e0b\u7684\u4ee3\u7801\u90fd\u53d1\u5e03\u5230 ",(0,p.kt)("inlineCode",{parentName:"p"},"npm")," \u4e0a\uff0c\u56e0\u4e3a\u6211\u4eec\u5728 ",(0,p.kt)("inlineCode",{parentName:"p"},"package.json")," \u4e2d\u914d\u7f6e\u7684\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"files")," \u662f ",(0,p.kt)("inlineCode",{parentName:"p"},'["dist"]'),"\u3002"),(0,p.kt)("h2",{id:"\u8fd0\u884c\u90e8\u7f72\u811a\u672c"},"\u8fd0\u884c\u90e8\u7f72\u811a\u672c"),(0,p.kt)("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u8fd0\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"npm run pub")," \u811a\u672c\u90e8\u7f72\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u5728 ",(0,p.kt)("inlineCode",{parentName:"p"},"npm run prepub")," \u9636\u6bb5\uff0c\u5728\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"tslint  --project tsconfig.json -t codeFrame 'src/**/*.ts' 'test/**/*.ts'")," \u7684\u65f6\u5019\u5931\u8d25\u4e86\uff0c\u539f\u56e0\u662f\u6211\u4eec\u6709\u4ee3\u7801\u4e0d\u7b26\u5408 lint \u89c4\u8303\u3002\u539f\u6765\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"core/xhr.ts")," \u6587\u4ef6\u4e2d ",(0,p.kt)("inlineCode",{parentName:"p"},"processCancel")," \u51fd\u6570\u4e2d\u5bf9 ",(0,p.kt)("inlineCode",{parentName:"p"},"promise")," \u7684\u5904\u7406\uff0c\u6211\u4eec\u6ca1\u6709\u5bf9\u5f02\u5e38\u60c5\u51b5\u5904\u7406\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u7ed9\u5b83\u52a0\u4e0a ",(0,p.kt)("inlineCode",{parentName:"p"},"catch")," \u7684\u903b\u8f91\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-typescript"},"function processCancel(): void {\n  if (cancelToken) {\n    cancelToken.promise\n      .then(reason => {\n        request.abort()\n        reject(reason)\n      })\n      .catch(\n        /* istanbul ignore next */\n        () => {\n        // do nothing\n      })\n  }\n}\n")),(0,p.kt)("p",null,"\u7531\u4e8e\u6211\u4eec\u4e0d\u4f1a\u8d70\u5230 ",(0,p.kt)("inlineCode",{parentName:"p"},"catch")," \u903b\u8f91\uff0c\u6240\u4ee5\u6211\u4eec\u7ed9\u5b83\u6dfb\u52a0\u4e00\u4e2a\u6ce8\u91ca ",(0,p.kt)("inlineCode",{parentName:"p"},"/* istanbul ignore next */")," \u5ffd\u7565\u8be5\u4ee3\u7801\u5206\u652f\u7684\u6d4b\u8bd5\u3002"),(0,p.kt)("p",null,"\u7136\u540e\u6211\u4eec\u518d\u91cd\u65b0\u8fd0\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"npm run pub")," \u903b\u8f91\uff0c\u5b83\u4f1a\u5148\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"test"),"\uff0c\u7136\u540e\u8fd0\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"build")," \u7f16\u8bd1\u4ee3\u7801\uff0c\u518d\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"release.sh")," \u811a\u672c\u3002\u6211\u4eec\u8f93\u5165\u4e86\u8981\u53d1\u5e03\u7684\u7248\u672c\uff0c\u5b83\u5c31\u53ef\u4ee5\u5b8c\u6210\u4e86\u6574\u4e2a\u4ee3\u7801\u7684\u53d1\u5e03\u6d41\u7a0b\u3002"),(0,p.kt)("p",null,"\u901a\u8fc7\u7f16\u5199\u90e8\u7f72\u811a\u672c\u7684\u4e00\u884c\u547d\u4ee4\u53d1\u5e03\u7684\u65b9\u5f0f\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u7528\u5728\u8fd9\u79cd JS \u5e93\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6211\u4eec\u5e73\u65f6\u9879\u76ee\u5f00\u53d1\u4e2d\uff0c\u53ef\u4ee5\u5927\u5927\u5e2e\u52a9\u6211\u4eec\u63d0\u9ad8\u751f\u4ea7\u7387\uff0c\u4e5f\u662f\u524d\u7aef\u5de5\u7a0b\u5316\u4e2d\u5fc5\u4e0d\u53ef\u5c11\u7684\u4e00\u4e2a\u73af\u8282\uff0c\u5e0c\u671b\u540c\u5b66\u4eec\u90fd\u80fd\u5b66\u4f1a\u5e76\u638c\u63e1\u5b83\u3002"),(0,p.kt)("p",null,"\u81f3\u6b64\u6211\u4eec\u5b8c\u6210\u4e86\u9879\u76ee\u7684\u90e8\u7f72\u548c\u53d1\u5e03\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728 ",(0,p.kt)("inlineCode",{parentName:"p"},"npm")," \u5b98\u7f51\u4e0a\u770b\u5230\u6211\u4eec\u53d1\u5e03\u7684\u5305\uff0c\u4e0b\u4e00\u8282\u8bfe\u6211\u4eec\u6765\u521b\u5efa\u4e00\u4e2a\u5b9e\u9645\u9879\u76ee\uff0c\u6765\u5f15\u7528\u6211\u4eec\u5f00\u53d1\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios")," \u5e93\u3002"),(0,p.kt)("hr",null),(0,p.kt)("h2",{id:"\u5728-ts-\u9879\u76ee\u4e2d\u5f15\u7528"},"\u5728 TS \u9879\u76ee\u4e2d\u5f15\u7528"),(0,p.kt)("p",null,"\u6211\u4eec\u501f\u52a9\u4e8e ",(0,p.kt)("a",{parentName:"p",href:"https://cli.vuejs.org/"},"vue-cli")," \u811a\u624b\u67b6\u521b\u5efa\u4e00\u4e2a TypeScript \u7684 Vue \u9879\u76ee\uff0c\u7136\u540e\u6211\u4eec\u628a Vue \u5b98\u7f51\u4e0a\u4e00\u6bb5\u4f7f\u7528 axios \u53d1\u8bf7\u6c42\u7684 ",(0,p.kt)("a",{parentName:"p",href:"https://cn.vuejs.org/v2/guide/computed.html#%E4%BE%A6%E5%90%AC%E5%99%A8"},"demo")," \u4ee3\u7801\u6284\u8fc7\u6765\u3002"),(0,p.kt)("p",null,"\u6211\u4eec\u9700\u8981\u5148\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"npm install ts-axios-new")," \u5b89\u88c5 ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios")," \u5e93\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"HelloWorld.vue")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <div class=\"hello\">\n    <p>\n      Ask a yes/no question:\n      <input v-model=\"question\">\n    </p>\n    <p>{{ answer }}</p>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import Vue from 'vue'\n  import _ from 'lodash'\n  import axios from 'ts-axios-new'\n\n  export default Vue.extend({\n    name: 'HelloWorld',\n    data () {\n      return {\n        question: '',\n        answer: 'I cannot give you an answer until you ask a question!'\n      }\n    },\n    created () {\n      this.debouncedGetAnswer = _.debounce(this.getAnswer, 500)\n    },\n    methods: {\n      debouncedGetAnswer () {\n        // do nothing\n      },\n      getAnswer () {\n        if (this.question.indexOf('?') === -1) {\n          this.answer = 'Questions usually contain a question mark. -)'\n          return\n        }\n        this.answer = 'Thinking...'\n        const instance = axios.create()\n        instance.interceptors.request.use((config) => {\n          config.params = {\n            _t: +new Date()\n          }\n          return config\n        })\n\n        instance.get('https://yesno.wtf/api')\n          .then((response) => {\n            this.answer = _.capitalize(response.data.answer)\n          })\n          .catch((error) => {\n            this.answer = 'Error! Could not reach the API. ' + error\n          })\n      }\n    },\n    watch: {\n      question: function (newQuestion: string, oldQuestion: string) {\n        this.answer = 'Waiting for you to stop typing...'\n        this.debouncedGetAnswer()\n      }\n    }\n  })\n<\/script>\n\n\x3c!-- Add \"scoped\" attribute to limit CSS to this component only --\x3e\n<style scoped>\n  h3 {\n    margin: 40px 0 0;\n  }\n\n  ul {\n    list-style-type: none;\n    padding: 0;\n  }\n\n  li {\n    display: inline-block;\n    margin: 0 10px;\n  }\n\n  a {\n    color: #42b983;\n  }\n</style>\n")),(0,p.kt)("p",null,"\u8fd9\u6bb5\u4ee3\u7801\u4e3b\u8981\u662f\u63d0\u4f9b\u4e86\u4e00\u4e2a ",(0,p.kt)("inlineCode",{parentName:"p"},"input")," \u8f93\u5165\u6846\uff0c\u7ed1\u5b9a\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"question")," \u53d8\u91cf\uff0c\u5f53\u6211\u4eec\u8f93\u5165\u7684\u65f6\u5019\uff0c\u4f1a\u89e6\u53d1 ",(0,p.kt)("inlineCode",{parentName:"p"},"question")," \u7684\u53d8\u5316\uff0c\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"watch question")," \u4e2d\u7684\u903b\u8f91\uff0c\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"this.debouncedGetAnswer")," \u65b9\u6cd5\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"debounce")," \u6267\u884c\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"getAnswer")," \u65b9\u6cd5\uff0c\u53d1\u9001\u8bf7\u6c42\u3002"),(0,p.kt)("p",null,"\u6211\u4eec\u901a\u8fc7 ",(0,p.kt)("inlineCode",{parentName:"p"},"import axios from 'ts-axios-new'\n")," \u53bb\u52a0\u8f7d ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios")," \u5e93\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5f15\u5165\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"node_modules/ts-axios-new/dist/axios.es5.js"),"\uff0c\u56e0\u4e3a ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios-new")," \u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"package.json")," \u6587\u4ef6\u4e2d\u914d\u7f6e\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"module")," \u5b57\u6bb5\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"dist/axios.es5.js"),"\uff0c\u5728 ",(0,p.kt)("inlineCode",{parentName:"p"},"webpack")," \u4e2d\u4f18\u5148 ",(0,p.kt)("inlineCode",{parentName:"p"},"import")," \u4f18\u5148\u4f1a\u627e ",(0,p.kt)("inlineCode",{parentName:"p"},"module")," \u5b57\u6bb5\uff0c\u5176\u6b21\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"main")," \u5b57\u6bb5\u3002"),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"\u5c0f\u6280\u5de7\uff1a\u5f53\u6211\u4eec\u5f15\u5165\u67d0\u4e2a\u5e93\u8fd0\u884c\u65f6\u51fa\u73b0\u95ee\u9898\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8c03\u8bd5 node_modules \u4e2d\u5bf9\u5e94\u5f15\u5165\u7684\u4ee3\u7801\u3002")),(0,p.kt)("p",null,"\u6ce8\u610f\u6211\u4eec\u8fd9\u91cc\u5148\u4f7f\u7528\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"axios.create()")," \u65b9\u6cd5\u521b\u5efa\u4e86\u4e00\u4e2a ",(0,p.kt)("inlineCode",{parentName:"p"},"instance"),"\uff0c\u7136\u540e\u6dfb\u52a0\u4e86\u4e00\u4e2a\u8bf7\u6c42\u62e6\u622a\u5668\uff0c\u4f1a\u5728\u6bcf\u6b21\u53d1\u9001\u8bf7\u6c42\u524d\uff0c\u6dfb\u52a0\u4e86\u4e00\u4e2a ",(0,p.kt)("inlineCode",{parentName:"p"},"_t")," \u53c2\u6570\uff0c\u503c\u4e3a\u65f6\u95f4\u6233\u3002\u7136\u540e\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"instance.get")," \u53d1\u9001\u4e00\u4e2a\u8bf7\u6c42\u3002"),(0,p.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6574\u4e2a demo \u662f\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u7684\uff0c\u5e76\u4e14\u6ca1\u6709\u4efb\u4f55\u7c7b\u578b\u76f8\u5173\u7684\u95ee\u9898\uff0c\u8bf4\u660e\u6211\u4eec\u7684\u5e93\u6253\u5305\u540e\u7684\u4ee3\u7801\u548c\u7c7b\u578b\u58f0\u660e\u6587\u4ef6\u90fd\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002"),(0,p.kt)("h2",{id:"\u5728-js-\u9879\u76ee\u4e2d\u5f15\u7528"},"\u5728 JS \u9879\u76ee\u4e2d\u5f15\u7528"),(0,p.kt)("p",null,"\u6211\u4eec\u7f16\u5199\u7684 TS \u5e93\u4ecd\u7136\u53ef\u4ee5\u88ab\u7eaf JS \u7684\u9879\u76ee\u5f15\u7528\uff0c\u8fd9\u6b21\u6211\u4eec\u6765\u4fee\u6539",(0,p.kt)("a",{parentName:"p",href:"https://coding.imooc.com/class/74.html"},"\u300aVue.js2.5+cube-ui\u91cd\u6784\u997f\u4e86\u4e48App\u300b"),"\u8bfe\u7a0b\u7684\u4ee3\u7801\uff0c\u628a\u4e4b\u524d\u5bf9 ",(0,p.kt)("inlineCode",{parentName:"p"},"axios")," \u7684\u5f15\u7528\u6539\u6210\u5bf9 ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios-new")," \u7684\u5f15\u7528\u3002\u8bfe\u7a0b\u6e90\u7801\u662f\u5f00\u6e90\u7684\uff0c\u6240\u4ee5\u6ca1\u8d2d\u4e70\u8bfe\u7a0b\u7684\u5c0f\u4f19\u4f34\u4e5f\u53ef\u4ee5\u53bb ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/ustbhuangyi/vue-sell"},"GitHub")," \u4e0b\u8f7d\u3002"),(0,p.kt)("p",null,"\u6211\u4eec\u9700\u8981\u5148\u6267\u884c ",(0,p.kt)("inlineCode",{parentName:"p"},"npm install ts-axios-new")," \u5b89\u88c5 ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios")," \u5e93\uff0c\u7136\u540e\u4fee\u6539\u4ee3\u7801\u3002"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"api/helpers.js"),"\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-javascript"},"import axios from 'ts-axios-new'\n\nconst urlMap = {\n  development: '/',\n  production: 'http://ustbhuangyi.com/sell/'\n}\nconst baseUrl = urlMap[process.env.NODE_ENV]\nconst ERR_OK = 0\n\nexport function get(url) {\n  return function(params = {}) {\n    return axios.get(baseUrl + url, {\n      params\n    }).then((res) => {\n      const {errno, data} = res.data\n      if (errno === ERR_OK) {\n        return data\n      }\n    }).catch((e) => {\n    })\n  }\n}\n\n")),(0,p.kt)("p",null,"\u53ea\u9700\u8981\u628a ",(0,p.kt)("inlineCode",{parentName:"p"},"import axios from 'axios'")," \u4fee\u6539\u4e3a ",(0,p.kt)("inlineCode",{parentName:"p"},"import axios from 'ts-axios-new'")," \u5373\u53ef\u3002"),(0,p.kt)("p",null,"\u63a5\u7740\u8fd0\u884c\u9879\u76ee\uff0c\u6211\u4eec\u53d1\u73b0\u9879\u76ee\u53ef\u4ee5\u6210\u529f\u8fd0\u884c\uff0c\u56e0\u4e3a\u6211\u4eec\u5b9e\u73b0\u4e86",(0,p.kt)("inlineCode",{parentName:"p"},"axios")," \u5728\u6d4f\u89c8\u5668\u7aef\u7684\u6240\u6709\u529f\u80fd\uff0c\u6240\u4ee5\u53ef\u4ee5\u653e\u5fc3\u7684\u505a\u66ff\u6362\u3002"),(0,p.kt)("p",null,"\u81f3\u6b64\uff0c\u6211\u4eec\u5c31\u5b8c\u6210\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"ts-axios")," \u5e93\u7684\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u7f16\u8bd1\u3001\u53d1\u5e03\u548c\u5f15\u7528\u3002\u8bfe\u7a0b\u5230\u8fd9\u91cc\u4e5f\u5c31\u544a\u4e00\u6bb5\u843d\u4e86\uff0c\u4e0b\u4e00\u7ae0\u6211\u4eec\u4f1a\u5bf9\u6574\u4e2a\u8bfe\u7a0b\u505a\u603b\u7ed3\u4e0e\u5c55\u671b\u3002"))}d.isMDXComponent=!0}}]);