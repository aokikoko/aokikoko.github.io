"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1550],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return g}});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var o=n.createContext({}),i=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},u=function(e){var t=i(e.components);return n.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=i(a),g=l,f=c["".concat(o,".").concat(g)]||c[g]||m[g]||r;return a?n.createElement(f,s(s({ref:t},u),{},{components:a})):n.createElement(f,s({ref:t},u))}));function g(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,s=new Array(r);s[0]=c;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p.mdxType="string"==typeof e?e:l,s[1]=p;for(var i=2;i<r;i++)s[i]=a[i];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},8013:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return o},default:function(){return c},frontMatter:function(){return p},metadata:function(){return i},toc:function(){return u}});var n=a(7462),l=a(3366),r=(a(7294),a(3905)),s=["components"],p={title:"[DevOps] \u666e\u7f57\u7c73\u4fee\u65af",sidebar_position:1},o=void 0,i={unversionedId:"DevOps/prometheus",id:"DevOps/prometheus",title:"[DevOps] \u666e\u7f57\u7c73\u4fee\u65af",description:"\u666e\u7f57\u7c73\u4fee\u65af",source:"@site/docs/DevOps/prometheus.md",sourceDirName:"DevOps",slug:"/DevOps/prometheus",permalink:"/docs/DevOps/prometheus",editUrl:"https://github.com/aokikoko/aokikoko.github.io/blob/main/website/docs/DevOps/prometheus.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"[DevOps] \u666e\u7f57\u7c73\u4fee\u65af",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"[Cli] npm\u5347\u7ea7\u7248\u672c\u540e\u4ecd\u7136\u663e\u793a\u4e3a\u539f\u7248\u672c",permalink:"/docs/Cli/npm"},next:{title:"[DevOps] \u4ee3\u7801\u66f4\u65b0\u65b9\u6cd5",permalink:"/docs/DevOps/daima"}},u=[{value:"\u666e\u7f57\u7c73\u4fee\u65af",id:"\u666e\u7f57\u7c73\u4fee\u65af",children:[],level:2},{value:"\u666e\u7f57\u7c73\u4fee\u65af\u539f\u7406\u67b6\u6784\u56fe",id:"\u666e\u7f57\u7c73\u4fee\u65af\u539f\u7406\u67b6\u6784\u56fe",children:[],level:2},{value:"\u5b9e\u9a8c\u73af\u5883\u51c6\u5907",id:"\u5b9e\u9a8c\u73af\u5883\u51c6\u5907",children:[],level:2},{value:"\u5b89\u88c5 prometheus",id:"\u5b89\u88c5-prometheus",children:[],level:2},{value:"prometheus \u754c\u9762",id:"prometheus-\u754c\u9762",children:[],level:2},{value:"\u76d1\u63a7\u8fdc\u7a0b linux \u4e3b\u673a",id:"\u76d1\u63a7\u8fdc\u7a0b-linux-\u4e3b\u673a",children:[],level:2},{value:"\u76d1\u63a7\u8fdc\u7a0b mysql",id:"\u76d1\u63a7\u8fdc\u7a0b-mysql",children:[],level:2},{value:"\u4f7f\u7528 grafana \u8fde\u63a5 prometheus",id:"\u4f7f\u7528-grafana-\u8fde\u63a5-prometheus",children:[],level:2},{value:"grafana \u56fe\u5f62\u663e\u793a mysql \u76d1\u63a7\u6570\u636e",id:"grafana-\u56fe\u5f62\u663e\u793a-mysql-\u76d1\u63a7\u6570\u636e",children:[],level:2},{value:"grafana+onealert \u62a5\u8b66",id:"grafanaonealert-\u62a5\u8b66",children:[],level:2},{value:"\u603b\u7ed3\u62a5\u8b66\u4e0d\u6210\u529f\u7684\u53ef\u80fd\u539f\u56e0",id:"\u603b\u7ed3\u62a5\u8b66\u4e0d\u6210\u529f\u7684\u53ef\u80fd\u539f\u56e0",children:[],level:2}],m={toc:u};function c(e){var t=e.components,p=(0,l.Z)(e,s);return(0,r.kt)("wrapper",(0,n.Z)({},m,p,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u666e\u7f57\u7c73\u4fee\u65af"},"\u666e\u7f57\u7c73\u4fee\u65af"),(0,r.kt)("p",null,"Prometheus(\u7531 go \u8bed\u8a00(golang)\u5f00\u53d1)\u662f\u4e00\u5957\u5f00\u6e90\u7684\u76d1\u63a7&\u62a5\u8b66&",(0,r.kt)("inlineCode",{parentName:"p"},"\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u5e93"),"\u7684\u7ec4\u5408\u3002\u9002\u5408\u76d1\u63a7\u5bb9\u5668\u5e73\u53f0\u3002\u56e0\u4e3a kubernetes(\u4fd7\u79f0 k8s)\u7684\u6d41\u884c\u5e26\u52a8\u4e86 prometheus \u7684\u53d1\u5c55\u3002"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://prometheus.io/docs/introduction/overview/"},"https://prometheus.io/docs/introduction/overview/")),(0,r.kt)("p",null,"\u6570\u636e\u5e93\u5206\u7c7b:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5173\u7cfb\u578b mysql,oracle,sql server,sybase,db2,access \u7b49"),(0,r.kt)("li",{parentName:"ul"},"\u975e\u5173\u7cfb\u578b(nosql)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"key-value memcache redis etcd"),(0,r.kt)("li",{parentName:"ul"},"\u6587\u6863\u578b mongodb elasticsearch"),(0,r.kt)("li",{parentName:"ul"},"\u5217\u5f0f hbase"),(0,r.kt)("li",{parentName:"ul"},"\u65f6\u5e8f prometheus"),(0,r.kt)("li",{parentName:"ul"},"\u56fe\u5f62\u6570\u636e\u5e93")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u65f6\u95f4\u5e8f\u5217\u6570\u636e"),"(TimeSeries Data) : \u6309\u7167\u65f6\u95f4\u987a\u5e8f\u8bb0\u5f55\u7cfb\u7edf\u3001\u8bbe\u5907\u72b6\u6001\u53d8\u5316\u7684\u6570\u636e\u88ab\u79f0\u4e3a\u65f6\u5e8f\u6570\u636e."),(0,r.kt)("p",null,"\u5e94\u7528\u7684\u573a\u666f\u5f88\u591a, \u5982:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u65e0\u4eba\u9a7e\u9a76\u8f66\u8f86\u8fd0\u884c\u4e2d\u8981\u8bb0\u5f55\u7684\u7ecf\u5ea6\uff0c\u7eac\u5ea6\uff0c\u901f\u5ea6\uff0c\u65b9\u5411\uff0c\u65c1\u8fb9\u7269\u4f53\u7684\u8ddd\u79bb\u7b49\u7b49\u3002\u6bcf\u65f6\u6bcf\u523b\u90fd\u8981\u5c06\u6570\u636e\u8bb0\u5f55\u4e0b\u6765\u505a\u5206\u6790\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u67d0\u4e00\u4e2a\u5730\u533a\u7684\u5404\u8f66\u8f86\u7684\u884c\u9a76\u8f68\u8ff9\u6570\u636e"),(0,r.kt)("li",{parentName:"ul"},"\u4f20\u7edf\u8bc1\u5238\u884c\u4e1a\u5b9e\u65f6\u4ea4\u6613\u6570\u636e"),(0,r.kt)("li",{parentName:"ul"},"\u5b9e\u65f6\u8fd0\u7ef4\u76d1\u63a7\u6570\u636e\u7b49")),(0,r.kt)("p",null,"\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u5e93\u7684\u4e3b\u8981\u4f18\u70b9:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6027\u80fd\u597d")),(0,r.kt)("p",null,"\u5173\u7cfb\u578b\u6570\u636e\u5e93\u5bf9\u4e8e\u5927\u89c4\u6a21\u6570\u636e\u7684\u5904\u7406\u6027\u80fd\u7cdf\u7cd5\u3002NOSQL \u53ef\u4ee5\u6bd4\u8f83\u597d\u7684\u5904\u7406\u5927\u89c4\u6a21\u6570\u636e\uff0c\u8ba9\u4f9d\u7136\u6bd4\u4e0d\u4e0a\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u5e93\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5b58\u50a8\u6210\u672c\u4f4e")),(0,r.kt)("p",null,"\u9ad8\u6548\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\uff0c\u6709\u6548\u964d\u4f4e IO"),(0,r.kt)("p",null,"Prometheus \u6709\u7740\u975e\u5e38\u9ad8\u6548\u7684\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u5b58\u50a8\u65b9\u6cd5\uff0c\u6bcf\u4e2a\u91c7\u6837\u6570\u636e\u4ec5\u4ec5\u5360\u7528 3.5byte \u5de6\u53f3\u7a7a\u95f4\uff0c\u4e0a\u767e\u4e07\u6761\u65f6\u95f4\u5e8f\u5217\uff0c30 \u79d2\u95f4\u9694\uff0c\u4fdd\u7559 60 \u5929\uff0c\u5927\u6982\u82b1\u4e86 200 \u591a G\uff08\u6765\u81ea\u5b98\u65b9\u6570\u636e)"),(0,r.kt)("p",null,"Prometheus \u7684\u4e3b\u8981\u7279\u5f81\u6709:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u591a\u7ef4\u5ea6\u6570\u636e\u6a21\u578b")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u7075\u6d3b\u7684\u67e5\u8be2\u8bed\u8a00")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4e0d\u4f9d\u8d56\u5206\u5e03\u5f0f\u5b58\u50a8\uff0c\u5355\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u662f\u81ea\u4e3b\u7684")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4ee5 HTTP \u65b9\u5f0f\uff0c\u901a\u8fc7 pull \u6a21\u578b\u62c9\u53bb\u65f6\u95f4\u5e8f\u5217\u6570\u636e")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e2d\u95f4\u7f51\u5173\u652f\u6301 push \u6a21\u578b")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u901a\u8fc7\u670d\u52a1\u53d1\u73b0\u6216\u8005\u9759\u6001\u914d\u7f6e, \u6765\u53d1\u73b0\u76ee\u6807\u670d\u52a1\u5bf9\u8c61")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u652f\u6301\u591a\u79cd\u591a\u6837\u7684\u56fe\u8868\u548c\u754c\u9762\u5c55\u793a"))),(0,r.kt)("h2",{id:"\u666e\u7f57\u7c73\u4fee\u65af\u539f\u7406\u67b6\u6784\u56fe"},"\u666e\u7f57\u7c73\u4fee\u65af\u539f\u7406\u67b6\u6784\u56fe"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543678972185",src:a(5553).Z})),(0,r.kt)("h2",{id:"\u5b9e\u9a8c\u73af\u5883\u51c6\u5907"},"\u5b9e\u9a8c\u73af\u5883\u51c6\u5907"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543308185732",src:a(6461).Z})),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u9759\u6001 ip(\u8981\u6c42\u80fd\u4e0a\u5916\u7f51)")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4e3b\u673a\u540d"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"\u5404\u81ea\u914d\u7f6e\u597d\u4e3b\u673a\u540d\n# hostnamectl set-hostname --static server.cluster.com\n\u4e09\u53f0\u90fd\u4e92\u76f8\u7ed1\u5b9aIP\u4e0e\u4e3b\u673a\u540d\n# vim /etc/hosts\n10.1.1.13  server.cluster.com\n10.1.1.14  agent1.cluster.com\n10.1.1.15  grafana.cluster.com\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"==\u65f6\u95f4\u540c\u6b65=="),"(\u65f6\u95f4\u540c\u6b65\u4e00\u5b9a\u8981\u786e\u8ba4\u4e00\u4e0b)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"# systemctl restart ntpd\n# systemctl enable ntpd\n")),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"\u5173\u95ed\u9632\u706b\u5899,selinux")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"# systemctl stop firewalld\n# systemctl disable firewalld\n# iptables -F\n")),(0,r.kt)("h2",{id:"\u5b89\u88c5-prometheus"},"\u5b89\u88c5 prometheus"),(0,r.kt)("p",null,"\u4ece ",(0,r.kt)("a",{parentName:"p",href:"https://prometheus.io/download/"},"https://prometheus.io/download/")," \u4e0b\u8f7d\u76f8\u5e94\u7248\u672c\uff0c\u5b89\u88c5\u5230\u670d\u52a1\u5668\u4e0a"),(0,r.kt)("p",null,"\u5b98\u7f51\u63d0\u4f9b\u7684\u662f\u4e8c\u8fdb\u5236\u7248\uff0c\u89e3\u538b\u5c31\u80fd\u7528\uff0c\u4e0d\u9700\u8981\u7f16\u8bd1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},'[root@server ~]# tar xf prometheus-2.5.0.linux-amd64.tar.gz -C /usr/local/\n[root@server ~]# mv /usr/local/prometheus-2.5.0.linux-amd64/ /usr/local/prometheus\n\n\u76f4\u63a5\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u542f\u52a8\n[root@server ~]# /usr/local/prometheus/prometheus --config.file="/usr/local/prometheus/prometheus.yml" &\n\n\n\u786e\u8ba4\u7aef\u53e3(9090)\n[root@server ~]# lsof -i:9090\n')),(0,r.kt)("h2",{id:"prometheus-\u754c\u9762"},"prometheus \u754c\u9762"),(0,r.kt)("p",null,"\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee",(0,r.kt)("strong",{parentName:"p"},"http://\u670d\u52a1\u5668 IP:9090"),"\u5c31\u53ef\u4ee5\u8bbf\u95ee\u5230 prometheus \u7684\u4e3b\u754c\u9762"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543244447650",src:a(5325).Z})),(0,r.kt)("p",null,"\u9ed8\u8ba4\u53ea\u76d1\u63a7\u4e86\u672c\u673a\u4e00\u53f0\uff0c\u70b9 Status --\u300b\u70b9 Targets --\u300b\u53ef\u4ee5\u770b\u5230\u53ea\u76d1\u63a7\u4e86\u672c\u673a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543246024896",src:a(5406).Z})),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("strong",{parentName:"p"},"http://\u670d\u52a1\u5668 IP:9090/metrics"),"\u53ef\u4ee5\u67e5\u770b\u5230\u76d1\u63a7\u7684\u6570\u636e"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543246609467",src:a(1053).Z})),(0,r.kt)("p",null,"\u5728 web \u4e3b\u754c\u9762\u53ef\u4ee5\u901a\u8fc7\u5173\u952e\u5b57\u67e5\u8be2\u76d1\u63a7\u9879"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543246563254",src:a(6734).Z})),(0,r.kt)("h2",{id:"\u76d1\u63a7\u8fdc\u7a0b-linux-\u4e3b\u673a"},"\u76d1\u63a7\u8fdc\u7a0b linux \u4e3b\u673a"),(0,r.kt)("p",null,"1, \u5728\u8fdc\u7a0b linux \u4e3b\u673a(\u88ab\u76d1\u63a7\u7aef agent1)\u4e0a\u5b89\u88c5 node_exporter \u7ec4\u4ef6"),(0,r.kt)("p",null,"\u4e0b\u8f7d\u5730\u5740: ",(0,r.kt)("a",{parentName:"p",href:"https://prometheus.io/download/"},"https://prometheus.io/download/")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"[root@agent1 ~]# tar xf node_exporter-0.16.0.linux-amd64.tar.gz -C /usr/local/\n[root@agent1 ~]# mv /usr/local/node_exporter-0.16.0.linux-amd64/ /usr/local/node_exporter\n\n\u91cc\u9762\u5c31\u4e00\u4e2a\u542f\u52a8\u547d\u4ee4node_exporter,\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6b64\u547d\u4ee4\u542f\u52a8\n[root@agent1 ~]# ls /usr/local/node_exporter/\nLICENSE  node_exporter  NOTICE\n[root@agent1 ~]# nohup /usr/local/node_exporter/node_exporter &\n\n\u786e\u8ba4\u7aef\u53e3(9100)\n[root@agent1 ~]# lsof -i:9100\n")),(0,r.kt)("p",null,"\u6269\u5c55: ",(0,r.kt)("strong",{parentName:"p"},"==nohup=="),"\u547d\u4ee4: \u5982\u679c\u628a\u542f\u52a8 node_exporter \u7684\u7ec8\u7aef\u7ed9\u5173\u95ed,\u90a3\u4e48\u8fdb\u7a0b\u4e5f\u4f1a\u968f\u4e4b\u5173\u95ed\u3002nohup \u547d\u4ee4\u4f1a\u5e2e\u4f60\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002"),(0,r.kt)("p",null,"2, \u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee",(0,r.kt)("strong",{parentName:"p"},"http://\u88ab\u76d1\u63a7\u7aef IP:9100/metrics"),"\u5c31\u53ef\u4ee5\u67e5\u770b\u5230 node_exporter \u5728\u88ab\u76d1\u63a7\u7aef\u6536\u96c6\u7684\u76d1\u63a7\u4fe1\u606f"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543286036926",src:a(659).Z})),(0,r.kt)("p",null,"3, \u56de\u5230 prometheus \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u91cc\u6dfb\u52a0\u88ab\u76d1\u63a7\u673a\u5668\u7684\u914d\u7f6e\u6bb5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"\u5728\u4e3b\u914d\u7f6e\u6587\u4ef6\u6700\u540e\u52a0\u4e0a\u4e0b\u9762\u4e09\u884c\n[root@server ~]# vim /usr/local/prometheus/prometheus.yml\n - job_name: 'agent1'                   # \u53d6\u4e00\u4e2ajob\u540d\u79f0\u6765\u4ee3\u8868\u88ab\u76d1\u63a7\u7684\u673a\u5668\n   static_configs:\n   - targets: ['10.1.1.14:9100']        # \u8fd9\u91cc\u6539\u6210\u88ab\u76d1\u63a7\u673a\u5668\u7684IP\uff0c\u540e\u9762\u7aef\u53e3\u63a59100\n\n\u6539\u5b8c\u914d\u7f6e\u6587\u4ef6\u540e,\u91cd\u542f\u670d\u52a1\n[root@server ~]# pkill prometheus\n[root@server ~]# lsof -i:9090           # \u786e\u8ba4\u7aef\u53e3\u6ca1\u6709\u8fdb\u7a0b\u5360\u7528\n[root@server ~]# /usr/local/prometheus/prometheus --config.file=\"/usr/local/prometheus/prometheus.yml\" &\n[root@server ~]# lsof -i:9090           # \u786e\u8ba4\u7aef\u53e3\u88ab\u5360\u7528\uff0c\u8bf4\u660e\u91cd\u542f\u6210\u529f\n")),(0,r.kt)("p",null,"4\uff0c\u56de\u5230 web \u7ba1\u7406\u754c\u9762 --\u300b\u70b9 Status --\u300b\u70b9 Targets --\u300b\u53ef\u4ee5\u770b\u5230\u591a\u4e86\u4e00\u53f0\u76d1\u63a7\u76ee\u6807"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548299595073",src:a(7377).Z})),(0,r.kt)("p",null,"\u7ec3\u4e60: \u52a0\u4e0a\u672c\u673a prometheus \u7684\u76d1\u63a7"),(0,r.kt)("p",null,"\u7b54: \u5728\u672c\u673a\u5b89\u88c5 node_exporter\uff0c\u4e5f\u4f7f\u7528\u4e0a\u9762\u7684\u65b9\u5f0f\u76d1\u63a7\u8d77\u6765\u3002"),(0,r.kt)("h2",{id:"\u76d1\u63a7\u8fdc\u7a0b-mysql"},"\u76d1\u63a7\u8fdc\u7a0b mysql"),(0,r.kt)("p",null,"1,\u5728\u88ab\u7ba1\u7406\u673a agent1 \u4e0a\u5b89\u88c5 mysqld_exporter \u7ec4\u4ef6"),(0,r.kt)("p",null,"\u4e0b\u8f7d\u5730\u5740: ",(0,r.kt)("a",{parentName:"p",href:"https://prometheus.io/download/"},"https://prometheus.io/download/")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"\u5b89\u88c5mysqld_exporter\u7ec4\u4ef6\n[root@agent1 ~]# tar xf mysqld_exporter-0.11.0.linux-amd64.tar.gz -C /usr/local/\n[root@agent1 ~]# mv /usr/local/mysqld_exporter-0.11.0.linux-amd64/ /usr/local/mysqld_exporter\n[root@agent1 ~]# ls /usr/local/mysqld_exporter/\nLICENSE  mysqld_exporter  NOTICE\n\n\u5b89\u88c5mariadb\u6570\u636e\u5e93,\u5e76\u6388\u6743\n[root@agent1 ~]# yum install mariadb-server -y\n[root@agent1 ~]# systemctl restart mariadb\n[root@agent1 ~]# systemctl enable mariadb\n[root@agent1 ~]# mysql\n\nMariaDB [(none)]> grant select,replication client,process ON *.* to 'mysql_monitor'@'localhost' identified by '123';\n(\u6ce8\u610f:\u6388\u6743ip\u4e3alocalhost\uff0c\u56e0\u4e3a\u4e0d\u662fprometheus\u670d\u52a1\u5668\u6765\u76f4\u63a5\u627emariadb\u83b7\u53d6\u6570\u636e\uff0c\u800c\u662fprometheus\u670d\u52a1\u5668\u627emysql_exporter,mysql_exporter\u518d\u627emariadb\u3002\u6240\u4ee5\u8fd9\u4e2alocalhost\u662f\u6307\u7684mysql_exporter\u7684IP)\n\nMariaDB [(none)]> flush privileges;\n\nMariaDB [(none)]> quit\n\n\u521b\u5efa\u4e00\u4e2amariadb\u914d\u7f6e\u6587\u4ef6\uff0c\u5199\u4e0a\u8fde\u63a5\u7684\u7528\u6237\u540d\u4e0e\u5bc6\u7801(\u548c\u4e0a\u9762\u7684\u6388\u6743\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u8981\u5bf9\u5e94)\n[root@agent1 ~]# vim /usr/local/mysqld_exporter/.my.cnf\n[client]\nuser=mysql_monitor\npassword=123\n\n\u542f\u52a8mysqld_exporter\n[root@agent1 ~]# nohup /usr/local/mysqld_exporter/mysqld_exporter --config.my-cnf=/usr/local/mysqld_exporter/.my.cnf &\n\n\u786e\u8ba4\u7aef\u53e3(9104)\n[root@agent1 ~]# lsof -i:9104\n")),(0,r.kt)("p",null,"2, \u56de\u5230 prometheus \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u91cc\u6dfb\u52a0\u88ab\u76d1\u63a7\u7684 mariadb \u7684\u914d\u7f6e\u6bb5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"\u5728\u4e3b\u914d\u7f6e\u6587\u4ef6\u6700\u540e\u518d\u52a0\u4e0a\u4e0b\u9762\u4e09\u884c\n[root@server ~]# vim /usr/local/prometheus/prometheus.yml\n - job_name: 'agent1_mariadb'                   # \u53d6\u4e00\u4e2ajob\u540d\u79f0\u6765\u4ee3\u8868\u88ab\u76d1\u63a7\u7684mariadb\n   static_configs:\n   - targets: ['10.1.1.14:9104']                # \u8fd9\u91cc\u6539\u6210\u88ab\u76d1\u63a7\u673a\u5668\u7684IP\uff0c\u540e\u9762\u7aef\u53e3\u63a59104\n\n\n\u6539\u5b8c\u914d\u7f6e\u6587\u4ef6\u540e,\u91cd\u542f\u670d\u52a1\n[root@server ~]# pkill prometheus\n[root@server ~]# lsof -i:9090\n[root@server ~]# /usr/local/prometheus/prometheus --config.file=\"/usr/local/prometheus/prometheus.yml\" &\n[root@server ~]# lsof -i:9090\n")),(0,r.kt)("p",null,"3, \u56de\u5230 web \u7ba1\u7406\u754c\u9762 --\u300b\u70b9 Status --\u300b\u70b9 Targets --\u300b\u53ef\u4ee5\u770b\u5230\u76d1\u63a7 mariadb \u4e86"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543302909128",src:a(4455).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543721788379",src:a(2908).Z})),(0,r.kt)("h1",{id:"grafana"},"grafana"),(0,r.kt)("h2",{id:"\u4f7f\u7528-grafana-\u8fde\u63a5-prometheus"},"\u4f7f\u7528 grafana \u8fde\u63a5 prometheus"),(0,r.kt)("p",null,"Grafana \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5ea6\u91cf\u5206\u6790\u548c\u53ef\u89c6\u5316\u5de5\u5177\uff0c\u53ef\u4ee5\u901a\u8fc7\u5c06\u91c7\u96c6\u7684\u6570\u636e\u5206\u6790\uff0c\u67e5\u8be2\uff0c\u7136\u540e\u8fdb\u884c\u53ef\u89c6\u5316\u7684\u5c55\u793a,\u5e76\u80fd\u5b9e\u73b0\u62a5\u8b66\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548343346370",src:a(8617).Z})),(0,r.kt)("p",null,"\u7f51\u5740: ",(0,r.kt)("a",{parentName:"p",href:"https://grafana.com/"},"https://grafana.com/")),(0,r.kt)("p",null,"1, \u5728 grafana \u670d\u52a1\u5668\u4e0a\u5b89\u88c5 grafana"),(0,r.kt)("p",null,"\u4e0b\u8f7d\u5730\u5740:",(0,r.kt)("a",{parentName:"p",href:"https://grafana.com/grafana/download"},"https://grafana.com/grafana/download")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"\u6211\u8fd9\u91cc\u9009\u62e9\u7684rpm\u5305\uff0c\u4e0b\u8f7d\u540e\u76f4\u63a5rpm -ivh\u5b89\u88c5\u5c31OK\n[root@grafana ~]# rpm -ivh /root/Desktop/grafana-5.3.4-1.x86_64.rpm\n\u542f\u52a8\u670d\u52a1\n[root@grafana ~]# systemctl start grafana-server\n[root@grafana ~]# systemctl enable grafana-server\n\u786e\u8ba4\u7aef\u53e3(3000)\n[root@grafana ~]# lsof -i:3000\n")),(0,r.kt)("p",null,"2, \u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee ",(0,r.kt)("strong",{parentName:"p"},"http:// grafana \u670d\u52a1\u5668 IP:3000"),"\u5c31\u5230\u4e86\u767b\u5f55\u754c\u9762,\u4f7f\u7528\u9ed8\u8ba4\u7684 admin \u7528\u6237,admin \u5bc6\u7801\u5c31\u53ef\u4ee5\u767b\u9646\u4e86"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543295339031",src:a(8675).Z})),(0,r.kt)("p",null,"3, \u4e0b\u9762\u6211\u4eec\u628a prometheus \u670d\u52a1\u5668\u6536\u96c6\u7684\u6570\u636e\u505a\u4e3a\u4e00\u4e2a\u6570\u636e\u6e90\u6dfb\u52a0\u5230 grafana,\u8ba9 grafana \u53ef\u4ee5\u5f97\u5230 prometheus \u7684\u6570\u636e\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543295892083",src:a(7190).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543296759433",src:a(2747).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543296887234",src:a(1694).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543297041403",src:a(2772).Z})),(0,r.kt)("p",null,"4, \u7136\u540e\u4e3a\u6dfb\u52a0\u597d\u7684\u6570\u636e\u6e90\u505a\u56fe\u5f62\u663e\u793a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543298016041",src:a(5330).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543732976557",src:a(8817).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548317067216",src:a(5693).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548317384440",src:a(2805).Z})),(0,r.kt)("p",null,"5, \u4fdd\u5b58"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543298733368",src:a(3235).Z})),(0,r.kt)("p",null,"6\uff0c\u6700\u540e\u5728 dashboard \u53ef\u4ee5\u67e5\u770b\u5230"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548317584841",src:a(1820).Z})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5339\u914d\u6761\u4ef6\u663e\u793a")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548315785229",src:a(2052).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548315880685",src:a(5496).Z})),(0,r.kt)("h2",{id:"grafana-\u56fe\u5f62\u663e\u793a-mysql-\u76d1\u63a7\u6570\u636e"},"grafana \u56fe\u5f62\u663e\u793a mysql \u76d1\u63a7\u6570\u636e"),(0,r.kt)("p",null,"\u6839\u636e\u4e0a\u9762\u7684\u601d\u8def\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06",(0,r.kt)("inlineCode",{parentName:"p"},"mysql_global_status_threads_connected"),"\u8fd9\u4e2a metrics \u52a0\u5230 dashboard \u5b9e\u73b0\u5bf9 mysql \u6570\u636e\u5e93\u7684\u5f53\u524d\u8fde\u63a5\u6570\u7684\u76d1\u63a7\u3002"),(0,r.kt)("p",null,"\u4f46\u662f mysql \u9700\u8981\u76d1\u63a7\u7684\u72b6\u6001\u975e\u5e38\u7684\u591a(",(0,r.kt)("inlineCode",{parentName:"p"},"mysql> show status"),"\u5f97\u5230\u7684\u72b6\u6001\u4fe1\u606f\u51e0\u4e4e\u90fd\u53ef\u4ee5\u76d1\u63a7)\uff0c\u4e00\u4e2a\u4e2a\u7684\u624b\u52a8\u6dfb\u52a0\u592a\u7d2f\u4e86\u3002\u6709\u6ca1\u6709\u7c7b\u4f3c zabbix \u91cc\u7684\u6a21\u677f\u90a3\u79cd\u6982\u5ff5\u5462?"),(0,r.kt)("p",null,"\u7b54\u6848\u662f\u6709\u7684,\u9700\u8981\u5f00\u53d1\u4eba\u5458\u5f00\u53d1\u51fa\u76f8\u5e94\u7684 json \u683c\u5f0f\u7684\u6a21\u677f,\u7136\u540e\u5bfc\u5165\u8fdb\u53bb\u5c31\u53ef\u4ee5\u4e86\u3002\u90a3\u4e48\u95ee\u9898\u6765\u4e86,\u8c01\u5f00\u53d1?"),(0,r.kt)("p",null,"\u6709\u8fd9\u4e48\u51e0\u79cd\u9014\u5f84:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u516c\u53f8\u6709\u8fd9\u65b9\u9762\u7684\u4e13\u4e1a\u5f00\u53d1\u652f\u6301\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5b9a\u5236\u5316\u7684\u76d1\u63a7, \u8fd0\u7ef4\u5de5\u7a0b\u5e08\u914d\u5408\u5c31\u597d"),(0,r.kt)("li",{parentName:"ul"},"\u5f53\u7136\u8fd0\u7ef4\u5de5\u7a0b\u5e08\u4e5f\u53ef\u4ee5\u5b66\u4e60\u5e76\u5b9e\u73b0\u8fd9\u65b9\u9762\u7684\u5f00\u53d1"),(0,r.kt)("li",{parentName:"ul"},"\u5bfb\u627e\u522b\u4eba\u5f00\u53d1\u597d\u7684\u5f00\u6e90\u9879\u76ee")),(0,r.kt)("p",null,"grafana-dashboards \u5c31\u662f\u8fd9\u6837\u7684\u5f00\u6e90\u9879\u76ee"),(0,r.kt)("p",null,"\u53c2\u8003\u7f51\u5740: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/percona/grafana-dashboards"},"https://github.com/percona/grafana-dashboards")),(0,r.kt)("p",null,"1, \u4e0b\u8f7d grafana-dashboards \u5f00\u6e90\u9879\u76ee"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4e0b\u8f7d\u65b9\u6cd5:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"# git clone https://github.com/percona/grafana-dashboards.git\n\u5b66\u4e60\u5b8cgit\u4e0egithub\u76f8\u5173\u8bfe\u7a0b\u540e\u5c31\u660e\u767d\u4e86\n")),(0,r.kt)("p",null,"\u56e0\u4e3a github \u4e0b\u8f7d\u7f51\u901f\u975e\u5e38\u6162, \u6211\u8fd9\u91cc\u5df2\u7ecf\u4e0b\u8f7d\u597d\u4e86\u5171\u4eab\u7ed9\u5927\u5bb6"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1568622044299",src:a(3886).Z})),(0,r.kt)("p",null,"2\uff0c\u5728 grafana \u56fe\u5f62\u754c\u9762\u5bfc\u5165\u76f8\u5173 json \u6587\u4ef6"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1568622190725",src:a(9731).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1568622320157",src:a(1124).Z})),(0,r.kt)("p",null,"3,\u70b9 import \u5bfc\u5165\u540e,\u62a5 prometheus \u6570\u636e\u6e90\u627e\u4e0d\u5230,\u56e0\u4e3a\u8fd9\u4e9b json \u6587\u4ef6\u91cc\u9ed8\u8ba4\u8981\u627e\u7684\u5c31\u662f\u53eb Prometheus \u7684\u6570\u636e\u6e90\uff0c\u4f46\u6211\u4eec\u524d\u9762\u5efa\u7acb\u7684\u6570\u636e\u6e90\u5374\u662f\u53eb prometheus_data"),(0,r.kt)("p",null,"\u90a3\u4e48\u8bf7\u81ea\u884c\u628a\u539f\u6765\u7684 prometheus_data \u6e90\u6539\u540d\u4e3a",(0,r.kt)("strong",{parentName:"p"},"Prometheus"),"\u5373\u53ef(\u6ce8\u610f:\u7b2c\u4e00\u4e2a\u5b57\u6bcd P \u662f\u5927\u5199)"),(0,r.kt)("p",null,"\u7136\u540e\u518d\u56de\u53bb\u5237\u65b0,\u5c31\u6709\u6570\u636e\u4e86(\u5982\u4e0b\u56fe\u6240\u793a)"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543307627738",src:a(754).Z})),(0,r.kt)("p",null,"4,\u8fc7\u6bb5\u65f6\u95f4\u518d\u770b\uff0c\u5c31\u4f1a\u6709\u6570\u636e\u4e86(\u5982\u4e0b\u56fe\u6240\u793a)"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543313055411",src:a(1397).Z})),(0,r.kt)("h2",{id:"grafanaonealert-\u62a5\u8b66"},"grafana+onealert \u62a5\u8b66"),(0,r.kt)("p",null,"prometheus \u62a5\u8b66\u9700\u8981\u4f7f\u7528 alertmanager \u8fd9\u4e2a\u7ec4\u4ef6\uff0c\u800c\u4e14\u62a5\u8b66\u89c4\u5219\u9700\u8981\u624b\u52a8\u7f16\u5199(\u5bf9\u8fd0\u7ef4\u6765\u8bf4\u4e0d\u53cb\u597d)\u3002\u6240\u4ee5\u6211\u8fd9\u91cc\u9009\u7528 grafana+onealert \u62a5\u8b66\u3002"),(0,r.kt)("p",null,"\u6ce8\u610f: \u5b9e\u73b0\u62a5\u8b66\u524d\u628a\u6240\u6709\u673a\u5668",(0,r.kt)("strong",{parentName:"p"},"==\u65f6\u95f4\u540c\u6b65=="),"\u518d\u68c0\u67e5\u4e00\u904d."),(0,r.kt)("p",null,"1,\u5148\u5728 onealert \u91cc\u6dfb\u52a0 grafana \u5e94\u7528(\u7533\u8bf7 onealert \u8d26\u53f7\u5728 zabbix \u5df2\u7ecf\u8bb2\u8fc7)"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1568623160170",src:a(8844).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1568623529894",src:a(1746).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1568623615096",src:a(8585).Z})),(0,r.kt)("p",null,"2, \u914d\u7f6e\u901a\u77e5\u7b56\u7565"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1568623797665",src:a(869).Z})),(0,r.kt)("p",null,"3,\u5728 grafana \u589e\u52a0\u901a\u77e5\u901a\u9053"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1568623670039",src:a(7997).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543675738028",src:a(4505).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543676016170",src:a(6755).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543676056834",src:a(623).Z})),(0,r.kt)("p",null,"4\uff0c\u73b0\u5728\u53ef\u4ee5\u53bb\u8bbe\u7f6e\u4e00\u4e2a\u62a5\u8b66\u6765\u6d4b\u8bd5\u4e86(\u8fd9\u91cc\u4ee5\u6211\u4eec\u524d\u9762\u52a0\u7684 cpu \u8d1f\u8f7d\u76d1\u63a7\u6765\u505a\u6d4b\u8bd5)"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543676704323",src:a(8949).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543676776304",src:a(6832).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543677077350",src:a(6194).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543677287856",src:a(3294).Z})),(0,r.kt)("p",null,"5\uff0c\u4fdd\u5b58\u540e\u5c31\u53ef\u4ee5\u6d4b\u8bd5\u4e86"),(0,r.kt)("p",null,"\u5982\u679c agent1 \u4e0a\u7684 cpu \u8d1f\u8f7d\u8fd8\u6ca1\u6709\u5230 0.5\uff0c\u4f60\u53ef\u4ee5\u8bd5\u8bd5 0.1,\u6216\u8005\u8fd0\u884c\u4e00\u4e9b\u7a0b\u5e8f\u628a agent1 \u8d1f\u8f7d\u8c03\u5927\u3002\u6700\u7ec8\u80fd\u6d4b\u8bd5\u62a5\u8b66\u6210\u529f\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543677915263",src:a(3872).Z})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6700\u7ec8\u7684\u90ae\u4ef6\u62a5\u8b66\u6548\u679c")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543678019297",src:a(3947).Z})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6d4b\u8bd5 mysql \u94fe\u63a5\u6570\u62a5\u8b66")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548321435039",src:a(3932).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1543741346238",src:a(315).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548322466548",src:a(307).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548326398846",src:a(7127).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548322567131",src:a(7283).Z})),(0,r.kt)("h2",{id:"\u603b\u7ed3\u62a5\u8b66\u4e0d\u6210\u529f\u7684\u53ef\u80fd\u539f\u56e0"},"\u603b\u7ed3\u62a5\u8b66\u4e0d\u6210\u529f\u7684\u53ef\u80fd\u539f\u56e0"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5404\u670d\u52a1\u5668\u4e4b\u95f4\u65f6\u95f4\u4e0d\u540c\u6b65\uff0c\u8fd9\u6837\u65f6\u5e8f\u6570\u636e\u4f1a\u51fa\u95ee\u9898\uff0c\u4e5f\u4f1a\u9020\u6210\u62a5\u8b66\u51fa\u95ee\u9898"),(0,r.kt)("li",{parentName:"ul"},"\u5fc5\u987b\u5199\u901a\u77e5\u5185\u5bb9\uff0c\u7559\u7a7a\u5185\u5bb9\u662f\u4e0d\u4f1a\u53d1\u62a5\u8b66\u7684"),(0,r.kt)("li",{parentName:"ul"},"\u4fee\u6539\u5b8c\u62a5\u8b66\u914d\u7f6e\u540e\uff0c\u8bb0\u5f97\u8981\u70b9\u53f3\u4e0a\u89d2\u7684\u4fdd\u5b58"),(0,r.kt)("li",{parentName:"ul"},"\u4fdd\u5b58\u914d\u7f6e\u540e\uff0c\u9700\u8981\u7531 OK \u72b6\u6001\u53d8\u4e3a alerting \u72b6\u6001\u624d\u4f1a\u62a5\u8b66(\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u914d\u7f6e\u4fdd\u5b58\u540e\uff0c\u5c31\u5df2\u7ecf\u662f alerting \u72b6\u6001\u662f\u4e0d\u4f1a\u62a5\u8b66\u7684)"),(0,r.kt)("li",{parentName:"ul"},"grafana \u4e0e onealert \u901a\u4fe1\u6709\u95ee\u9898")),(0,r.kt)("h1",{id:"\u6269\u5c55"},"\u6269\u5c55"),(0,r.kt)("p",null,"prometheus \u76ee\u524d\u8fd8\u5728\u53d1\u5c55\u4e2d\uff0c\u5f88\u591a\u76f8\u5e94\u7684\u76d1\u63a7\u90fd\u9700\u8981\u5f00\u53d1\u3002\u4f46\u5728\u5b98\u7f51\u7684 dashboard \u5e93\u4e2d,\u4e5f\u6709\u4e00\u4e9b\u5b98\u65b9\u548c\u793e\u533a\u5f00\u53d1\u4eba\u5458\u5f00\u53d1\u7684 dashboard \u53ef\u4ee5\u76f4\u63a5\u62ff\u6765\u7528\u3002"),(0,r.kt)("p",null,"\u5730\u5740\u4e3a: ",(0,r.kt)("a",{parentName:"p",href:"https://grafana.com/grafana/dashboards"},"https://grafana.com/grafana/dashboards")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548343742261",src:a(3845).Z})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u793a\u4f8b:")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548335365112",src:a(2576).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1548335440541",src:a(2608).Z})))}c.isMDXComponent=!0},2608:function(e,t,a){t.Z=a.p+"assets/images/dashboard\u5c55\u793a2-3b5a57d6c9f38e086bef12407ff5231a.png"},3886:function(e,t,a){t.Z=a.p+"assets/images/grafana-dashboards-36465a7478a94a80348f799d19a63ed1.png"},3845:function(e,t,a){t.Z=a.p+"assets/images/grafana-dashboards\u4e0b\u8f7d-6b7d8d0af5fd7e38b7827922e072472c.png"},8617:function(e,t,a){t.Z=a.p+"assets/images/grafana\u5b98\u7f51\u4ecb\u7ecd-bc28ce6fb79243d3c13df61985647c91.png"},8675:function(e,t,a){t.Z=a.p+"assets/images/grafana\u767b\u9646\u754c\u9762-c7870d4421d035f343407b9954b4a85a.png"},4505:function(e,t,a){t.Z=a.p+"assets/images/granfa\u6dfb\u52a0\u901a\u77e5\u901a\u9053-ba9727417e1fd53189b2dba1410cf95a.png"},6755:function(e,t,a){t.Z=a.p+"assets/images/granfa\u6dfb\u52a0\u901a\u77e5\u901a\u90532-975f4e2100b953d47f7256834a393d9b.png"},623:function(e,t,a){t.Z=a.p+"assets/images/granfa\u6dfb\u52a0\u901a\u77e5\u901a\u90533-f6374fa1137505329233402975a7eda5.png"},3932:function(e,t,a){t.Z=a.p+"assets/images/mysql\u94fe\u63a5\u6570\u62a5\u8b660-523a5cfee0b84bddc81f3e5fb8fe53de.png"},315:function(e,t,a){t.Z=a.p+"assets/images/mysql\u94fe\u63a5\u6570\u62a5\u8b661-8dace66d181a41dbb52f58465c47d7d0.png"},7127:function(e,t,a){t.Z=a.p+"assets/images/mysql\u94fe\u63a5\u6570\u62a5\u8b662-2-6c60928f8141f7f623ecdb2d079be4fb.png"},307:function(e,t,a){t.Z=a.p+"assets/images/mysql\u94fe\u63a5\u6570\u62a5\u8b662-a8866a5167c0de4e2ef59d123a882a8f.png"},7283:function(e,t,a){t.Z=a.p+"assets/images/mysql\u94fe\u63a5\u6570\u62a5\u8b663-9f4843a717af431b3792420c8ba07c38.png"},8844:function(e,t,a){t.Z=a.p+"assets/images/onealert-ff20d909ead86b61fd5085493bd9ce2d.png"},1746:function(e,t,a){t.Z=a.p+"assets/images/onealert\u6dfb\u52a0granfa-ad2aaa9eb5c410bda2ab01de46f6ec66.png"},7997:function(e,t,a){t.Z=a.p+"assets/images/onealert\u6dfb\u52a0granfa2-2-281fe3104c70e874be19f7b58eb4640e.png"},8585:function(e,t,a){t.Z=a.p+"assets/images/onealert\u6dfb\u52a0granfa2-48b1246ee9a599cab0540aee6a5946c2.png"},869:function(e,t,a){t.Z=a.p+"assets/images/onealert\u914d\u7f6e\u901a\u77e5\u7b56\u7565-8e706672bc5b2e6e5484392da3fcf49d.png"},5553:function(e,t,a){t.Z=a.p+"assets/images/prometheus-9d584a57779ab9a2edf96c72b26ffecb.png"},6461:function(e,t,a){t.Z=a.p+"assets/images/shiyan-07190ff280350dfbb2329cf7d98678a1.png"},5325:function(e,t,a){t.Z=a.p+"assets/images/\u4e3b\u754c\u9762-58e062f3cedab03efe08e1b2fd59424a.png"},8817:function(e,t,a){t.Z=a.p+"assets/images/\u521b\u5efa\u56fe\u5f621-2-02ef5371c3968cf708cdcb73f5c27eb9.png"},5693:function(e,t,a){t.Z=a.p+"assets/images/\u521b\u5efa\u56fe\u5f621-3-fe14cb75c2da7f25d71128ff59cf7acb.png"},5330:function(e,t,a){t.Z=a.p+"assets/images/\u521b\u5efa\u56fe\u5f621-82307ecd103973c037947f209b1c656a.png"},2805:function(e,t,a){t.Z=a.p+"assets/images/\u521b\u5efa\u56fe\u5f622-dae44537f0eed5fb8bdd36a5f314203e.png"},3235:function(e,t,a){t.Z=a.p+"assets/images/\u521b\u5efa\u56fe\u5f624-8744fd87a8c588b9b0765930d9ec9455.png"},2052:function(e,t,a){t.Z=a.p+"assets/images/\u5339\u914d\u6761\u4ef6\u663e\u793a-a3e216594fd194a7298dfb5a19314572.png"},5496:function(e,t,a){t.Z=a.p+"assets/images/\u5339\u914d\u6761\u4ef6\u663e\u793a2-e5956e8044063369925aeeaa7957add7.png"},7190:function(e,t,a){t.Z=a.p+"assets/images/\u589e\u52a0\u6570\u636e\u6e90-2489dec0c0b31a67612eda5234110ecd.png"},2747:function(e,t,a){t.Z=a.p+"assets/images/\u589e\u52a0\u6570\u636e\u6e902-f2db0645a380444d59bf59bb49737da0.png"},1694:function(e,t,a){t.Z=a.p+"assets/images/\u589e\u52a0\u6570\u636e\u6e903-6fe4a15f33fb60f7517220e408385b81.png"},2772:function(e,t,a){t.Z=a.p+"assets/images/\u589e\u52a0\u6570\u636e\u6e904-fd2fb506a7d5c5d75e21d93850233c31.png"},1820:function(e,t,a){t.Z=a.p+"assets/images/\u589e\u52a0\u6570\u636e\u6e905-1471368fdfddb223b6aa75c8edb5b154.png"},9731:function(e,t,a){t.Z=a.p+"assets/images/\u5bfc\u5165mysql\u7684json\u6587\u4ef6-95f77d7467b3ce296db0fdc1f286d0cc.png"},1124:function(e,t,a){t.Z=a.p+"assets/images/\u5bfc\u5165mysql\u7684json\u6587\u4ef62-18ee6b95d2d851fe6aa547d3f421ff01.png"},8949:function(e,t,a){t.Z=a.p+"assets/images/\u62a5\u8b66\u6d4b\u8bd5-e412087a3fff941c15b3b2738a13c234.png"},6832:function(e,t,a){t.Z=a.p+"assets/images/\u62a5\u8b66\u6d4b\u8bd52-566366587150006609658f4661286564.png"},6194:function(e,t,a){t.Z=a.p+"assets/images/\u62a5\u8b66\u6d4b\u8bd53-78c303062ffad3ec529000d44d76a6da.png"},3294:function(e,t,a){t.Z=a.p+"assets/images/\u62a5\u8b66\u6d4b\u8bd54-acd4a8f7e57ca8863d6d414af413847f.png"},3872:function(e,t,a){t.Z=a.p+"assets/images/\u62a5\u8b66\u6d4b\u8bd55-5519074588f1e7c610d8c7331ad079d4.png"},3947:function(e,t,a){t.Z=a.p+"assets/images/\u62a5\u8b66\u6d4b\u8bd56-b179cc409aa65772fc58dffc5f42b679.png"},754:function(e,t,a){t.Z=a.p+"assets/images/\u67e5\u770bmysql\u76d1\u63a7\u4fe1\u606f-79cc7493121ffc7976bbeca5f9fd7e0c.png"},1397:function(e,t,a){t.Z=a.p+"assets/images/\u67e5\u770bmysql\u76d1\u63a7\u4fe1\u606f2-54e65bee93bc050218b5cda2d22c4d05.png"},7377:function(e,t,a){t.Z=a.p+"assets/images/\u67e5\u770b\u88ab\u76d1\u63a7\u7aef\u662f\u5426\u88ab\u6210\u529f\u76d1\u63a7-f7d9324aabbf3b7e0613e40ad10365b8.png"},2576:function(e,t,a){t.Z=a.p+"assets/images/\u76d1\u63a7dashboard\u5c55\u793a-0e61576b7db74939f53dd9305a0606b3.png"},4455:function(e,t,a){t.Z=a.p+"assets/images/\u76d1\u63a7mysql-12d234b57b5582eaf085d9f75ab8fa82.png"},2908:function(e,t,a){t.Z=a.p+"assets/images/\u76d1\u63a7mysql2-c81c2c9f665bb46544b3b08e8341208d.png"},5406:function(e,t,a){t.Z=a.p+"assets/images/\u76d1\u63a7\u7684\u76ee\u6807-e9a872ceccfceb4b7f9d3c65b8af136a.png"},1053:function(e,t,a){t.Z=a.p+"assets/images/\u76d1\u63a7\u9879\u6570\u636e-859385e76aa8974c819ef79d694ec2e1.png"},659:function(e,t,a){t.Z=a.p+"assets/images/\u88ab\u76d1\u63a7\u7aef\u76d1\u63a7\u9879\u6570\u636e-eba66a665a71d38a616cc4b8c5d3cbad.png"},6734:function(e,t,a){t.Z=a.p+"assets/images/\u901a\u8fc7\u8868\u8fbe\u5f0f\u67e5\u8be2-71b2898c0014df591ca7d3b15293b87a.png"}}]);