---
title: "[Linux] 系统服务之DNS服务 - 搭建内网服务"
sidebar_position: 10
---

## 任务背景

公司内网中需要通过域名访问到开发的web应用. 所以需要在内网中搭建DNS服务器解析域名, 开发, 测试, 运维人员, 可以通过内网DNS服务, 访问到公司内部应用. 

也就是解析内网域名, 能够访问到内网应用, 比如把www.公司自定义.com 解析到服务器ip

## 任务拆解

1. 搭建dns服务

2. 客户端配置dns服务地址

## 理论储备

### 1. DNS概述

**DNS（domain name system ） 域名管理系统**

- 域名：

由特定的格式组成，用来表示互联网中`某一台计算机或者计算机组的称`，能够使人更方便的访问互联网，而不用记住能够被机器直接读取的IP地址。

计算机 => IP地址，互联网中的计算机都是通过IP地址进行互相访问的。(IP地址过于复杂)

域名：代替IP实现计算机的访问（高级 => 上层应用，底层还是IP地址）

每个域名 =>  DNS服务器  => 对应的IP地址

### ☆ DNS的正向解析

域名的==正向解析==

将主机域名转换为对应的IP 地址，以便网络程序能够通过主机域名访问到对应的服务器主机

**域名——>IP**		A记录

### ☆ DNS的反向解析

域名的==反向解析==

将主机的IP地址转换为对应的域名，以便网络（服务）程序能够通过IP地址查询到主机的域名

**IP——>域名**		PTR记录

### 2. DNS的结构

```powershell
域名：www.itheima.com
DNS结构：www.itheima.com.  =>  从右向左解析
```

![dns](assets/image-20200415143616891.png)


### DNS工作原理

客户端访问dns服务器后, dns服务器从cache中查找. 分为 `递归查询` 这种查询比较耗时, 所以现在一般采用 `迭代查询` 

`一次递归 多次迭代`

```
# dig +trace www.itcast.cn	  追踪DNS的解析过程
# dig www.itcast.cn			  正向解析
# dig -x IP地址			    反向解析
```
